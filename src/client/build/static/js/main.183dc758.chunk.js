(this["webpackJsonpboiler-log"]=this["webpackJsonpboiler-log"]||[]).push([[0],{176:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(31),r=a.n(c),s=a(9),i=a(8),o=a(4),l=a(3),u=a(34),d=a(2),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,c=Object(n.useState)(e),r=Object(l.a)(c,2),s=r[0],i=r[1],o=Object(n.useState)({}),j=Object(l.a)(o,2),b=j[0],h=j[1],m=Object(n.useState)(!1),f=Object(l.a)(m,2),O=f[0],p=f[1];Object(n.useEffect)((function(){0===Object.keys(b).length&&O&&(a(),p(!1))}),[b,a,O]);var x=function(e){e&&e.preventDefault(),h(t(s)),p(!0)},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;i(t)},g=function(e){var t=e.target;i(Object(d.a)(Object(d.a)({},s),{},Object(u.a)({},t.name,t.value)))};return[s,g,x,b,v]},b=a(5),h=a.n(b),m=a(6),f="[UI] Open modal",O="[UI] Close modal",p="[UI] Open toast",x="[UI] Close toast",v="[UI] Set clicked day",g="[UI] Remove current day",y="[Citas] Set active cita",N="[Citas] Remove active cita",_="[Citas] Update active cita",C="[Citas] Set all citas",k="[Citas] Set updated citas",w="[Citas] Remove citas",E="[Citas] Add cita",A="[Citas] Cancel cita",S="[Pacientes] Set all pacientes",D="[Pacientes] Set updated pacientes",I="[Pacientes] Set active paciente",P="[Pacientes] Remove active paciente",T="[Pacientes] Set citas of specific paciente",U="[Pacientes] Set archivos of specific paciente",L="[Pacientes] Remove pacientes",R="[Users] Set all pacientes",z="[Horarios] Set selected horario",F="[Auth] Finished checking JWT state",q="[Auth] Login",M="[Auth] Logout",G="https://drsmaroto.com",J=function(e,t,a,n,c,r){return fetch("".concat(G,"/new"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,pwd:t,name:a,lastName:n,user:c,admin:r})})},H=function(e,t){return fetch("".concat(G,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e,pwd:t})})},W=function(e){return fetch("".concat(G,"/renew"),{method:"GET",headers:{Authorization:e}})},B=function(e){return fetch("".concat(G,"/citas"),{method:"GET",headers:{Authorization:e}})},K=function(e,t){return fetch("".concat(G,"/citas"),{method:"PUT",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify(t)})},Q=function(e,t,a){return fetch("".concat(G,"/citas"),{method:"POST",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify({paciente:t,horario:a})})},V=function(e,t){return fetch("".concat(G,"/citas/").concat(t),{method:"DELETE",headers:{Authorization:e}})},X=function(e,t){return fetch("".concat(G,"/pacientes"),{method:"POST",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify(t)})},Y=function(e,t){return fetch("".concat(G,"/pacientes/search/").concat(t),{method:"GET",headers:{Authorization:e}})},Z=function(e){return fetch("".concat(G,"/pacientes"),{method:"GET",headers:{Authorization:e}})},$=function(e,t){return fetch("".concat(G,"/citas/paciente/").concat(encodeURIComponent(t)),{method:"GET",headers:{Authorization:e}})},ee=function(e,t){return fetch("".concat(G,"/pacientes"),{method:"PUT",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify(t)})},te=function(e){return fetch("".concat(G,"/citas/").concat(e),{method:"GET"})},ae=function(e,t){return fetch("".concat(G,"/citas/date/").concat(encodeURIComponent(e)),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json"}})},ne=function(e,t){return fetch("".concat(G,"/citas/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({horario:t})})},ce=function(e,t,a){return fetch("".concat(G,"/files/").concat(e),{method:"POST",headers:{Authorization:a},body:t})},re=function(e,t){return fetch("".concat(G,"/files/").concat(e),{method:"GET",headers:{Authorization:t}})},se=function(e,t,a){return fetch("".concat(G,"/files/").concat(e,"&").concat(t),{method:"DELETE",headers:{Authorization:a,"Content-Type":"application/json"}})},ie=function(e,t,a){return fetch("".concat(G,"/files/").concat(encodeURI(e),"&").concat(encodeURI(t)),{method:"GET",headers:{Authorization:a,"Content-Disposition":"attachment"}})},oe=function(e,t,a){return fetch("".concat(G,"/reportes/").concat(e),{method:"POST",headers:{Authorization:a,"Content-Type":"application/json"},body:JSON.stringify(t)})},le=function(e){return fetch("".concat(G,"/users"),{method:"GET",headers:{Authorization:e}})},ue=function(e,t,a){return fetch("".concat(G,"/users/").concat(t),{method:"POST",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify(a)})},de=function(e){return{type:f,payload:e}},je=function(e){return{type:p,payload:{error:e}}},be=function(){return{type:x}},he=function(){return{type:O}},me=function(e){return{type:v,payload:Object(d.a)({},e)}},fe=function(e,t,a){return{type:q,payload:{uid:e,displayName:t,rol:a}}},Oe=function(){return{type:M}},pe=function(){return{type:F}},xe=function(e){var t=e.email,a=e.name,n=e.pwd,c=e.confPwd,r=e.lastName,s=e.user,i={};return 0===t.trim().length&&(i.email="El correo es requerido"),/\S+@\S+\.\S+/.test(t)||(i.email="El correo es inv\xe1lido"),0===a.trim().length&&(i.name="Escribe un nombre v\xe1lido"),0===s.trim().length&&(i.user="Escribe un usuario v\xe1lido"),0===r.trim().length&&(i.lastName="Escribe un apellido v\xe1lido"),0===n.trim().length&&(i.pwd="Escribe una contrase\xf1a v\xe1lida"),0===c.trim().length&&(i.confPwd="Confirmar tu contrase\xf1a es requerido"),n!==c&&(i.pwdMatchError="Las contrase\xf1as deber\xedan de ser iguales"),i},ve=function(e){var t=e.user,a=e.pwd,n={};return 0===t.trim().length&&(n.user="El usuario es requerido"),0===a.trim().length&&(n.pwd="Escribe una contrase\xf1a v\xe1lida"),n},ge=a(0),ye=function(e){var t=e.type,a=e.handleInputChange,n=e.errors,c=e.value,r=e.name,s=e.placeholder,i=e.onKeyDown;return Object(ge.jsx)("input",{className:"auth__input ".concat("email"===r&&"mt-5"," ").concat(n["".concat(r)]?"auth__input-hasError":"mb-5"),name:r,autoComplete:"off",type:t,placeholder:s,value:c,onKeyDown:i,onChange:a})},Ne=function(e){var t=e.isAuth,a=void 0!==t&&t,n=e.message;return Object(ge.jsx)("p",{className:"".concat("Confirmar tu contrase\xf1a es requerido"===n?"mb-10":"mb-5"," auth__input-help  ").concat(a?"":"edit"),children:n})},_e=function(){var e=Object(o.b)(),t=j({user:"",pwd:""},ve,(function(){return e(function(e){var t=e.user,a=e.pwd;return function(){var e=Object(m.a)(h.a.mark((function e(n){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t,a);case 2:return c=e.sent,e.next=5,c.json();case 5:(r=e.sent).ok?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),n(fe(r.uid,r.user,r.rol))):n(je(r.msg));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(n))})),a=Object(l.a)(t,4),n=a[0],c=a[1],r=a[2],s=a[3],i=n.user,u=n.pwd;return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsxs)("h3",{className:"auth__title mb-5",children:["Ingres\xe1 ",Object(ge.jsx)("i",{className:"fas fa-sign-in-alt"})]}),Object(ge.jsxs)("form",{onSubmit:r,children:[Object(ge.jsx)(ye,{handleInputChange:c,placeholder:"Usuario",errors:s,type:"text",value:i,name:"user"}),s.user&&Object(ge.jsx)(Ne,{isAuth:!0,message:s.user}),Object(ge.jsx)(ye,{handleInputChange:c,errors:s,placeholder:"Contrase\xf1a",type:"password",value:u,name:"pwd"}),s.pwd&&Object(ge.jsx)(Ne,{isAuth:!0,message:s.pwd}),Object(ge.jsx)("button",{className:"btn btn__primary btn__block pointer mb-5",type:"submit",children:"Login"})]})]})},Ce=a(10),ke=function(e){return{type:R,payload:{users:Object(Ce.a)(e)}}},we=function(e){var t=e.group,a=e.warning,n=void 0!==a&&a,c=e.text,r=e.clickable,s=void 0!==r&&r,i=e.onClick;return s?Object(ge.jsx)("button",{onClick:i,className:"btn pointer mt-1 mb-5 ".concat(n?"btn__warning":"btn__primary"," ").concat(t?"btn__group":"btn__block"," "),type:"submit",children:c}):Object(ge.jsx)("button",{className:"btn pointer mt-1 mb-5 ".concat(n?"btn__warning":"btn__primary"," ").concat(t?"btn__group":"btn__block"," "),type:"submit",children:c})},Ee=function(e){var t=e.handleCheck,a=e.setting,n=e.helpMessage,c=e.checked;return Object(ge.jsxs)("div",{className:"checkbox mb-5 mt-1",children:[Object(ge.jsxs)("h5",{className:"mb-1",style:{textAlign:"left",marginTop:"13px",marginRight:"auto"},children:[a,Object(ge.jsx)("br",{}),Object(ge.jsx)("span",{style:{fontSize:"11px",fontWeight:"400"},children:n})]}),Object(ge.jsx)("input",{onChange:t,type:"checkbox",defaultChecked:c})]})},Ae=function(e){var t=e.isEdit,a=Object(n.useState)(!1),c=Object(l.a)(a,2),r=c[0],s=c[1],i=Object(o.b)(),u=j({email:"",user:"",name:"",lastName:"",pwd:"",confPwd:""},xe,(function(){i(function(e,t){var a=e.email,n=e.pwd,c=e.name,r=e.lastName,s=e.user;return function(){var e=Object(m.a)(h.a.mark((function e(i,o){var l,u,d,j,b,m,f;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(a,n,c,r,s,t);case 2:return l=e.sent,e.next=5,l.json();case 5:u=e.sent,d=u.ok,j=u.newUser,b=u.errors,m=u.msg,f=o().usuarios.totalUsers,d?(i(ke([].concat(Object(Ce.a)(f),[j]))),i(je(m))):i(je(b?b[Object.keys(b)[0]].msg:m));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}(b,r)),x()})),d=Object(l.a)(u,5),b=d[0],f=d[1],O=d[2],p=d[3],x=d[4],v=b.email,g=b.pwd,y=b.confPwd,N=b.name,_=b.lastName,C=b.user;return Object(n.useEffect)((function(){if(1===Object.keys(p).length){var e=p[Object.keys(p)[0]];i(je(e))}}),[p,i]),Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsxs)("h3",{className:"auth__title mb-5",children:[t?"Editar":"Crea una cuenta",Object(ge.jsx)("i",{className:"fas fa-user-plus"})]}),Object(ge.jsxs)("form",{onSubmit:O,children:[Object(ge.jsx)(ye,{handleInputChange:f,placeholder:"Email",errors:p,type:"email",value:v,name:"email"}),p.email&&Object(ge.jsx)(Ne,{message:p.email}),Object(ge.jsx)(ye,{handleInputChange:f,placeholder:"Usuario",errors:p,type:"text",value:C,name:"user"}),p.user&&Object(ge.jsx)(Ne,{message:p.user}),Object(ge.jsx)(ye,{handleInputChange:f,errors:p,placeholder:"Nombre",type:"text",value:N,name:"name"}),p.name&&Object(ge.jsx)(Ne,{message:p.name}),Object(ge.jsx)(ye,{handleInputChange:f,errors:p,placeholder:"Apellido",type:"text",value:_,name:"lastName"}),p.lastName&&Object(ge.jsx)(Ne,{message:p.lastName}),Object(ge.jsx)(ye,{handleInputChange:f,errors:p,placeholder:"Contrase\xf1a",type:"password",value:g,name:"pwd"}),p.pwd&&Object(ge.jsx)(Ne,{message:p.pwd}),Object(ge.jsx)(ye,{handleInputChange:f,errors:p,placeholder:"Confirma la contrase\xf1a",type:"password",value:y,name:"confPwd"}),p.confPwd&&Object(ge.jsx)(Ne,{message:p.confPwd}),Object(ge.jsx)(Ee,{setting:"Administrador?",checked:s,handleCheck:function(){return s(!r)}}),Object(ge.jsx)(we,{text:"Crear"})]})]})},Se=function(e){e.context;var t=e.error,a=e.success,n=Object(o.b)();return Object(ge.jsx)("div",{className:"wrapper",children:Object(ge.jsxs)("div",{className:"toast ".concat(a&&"toast-success"),children:[Object(ge.jsxs)("div",{className:"content",children:[Object(ge.jsx)("div",{className:"icon ".concat(a&&"icon-success"),children:a?Object(ge.jsx)("i",{className:"fas fa-check"}):Object(ge.jsx)("i",{className:"fas fa-exclamation"})}),Object(ge.jsxs)("div",{className:"details",children:[Object(ge.jsx)("span",{children:a?"Completado!":"Error!"}),Object(ge.jsx)("p",{children:t})]})]}),Object(ge.jsx)("div",{onClick:function(){return n(be())},className:"close-icon",children:Object(ge.jsx)("i",{className:"fas fa-times"})})]})})},De=function(){var e=Object(o.c)((function(e){return e.ui})),t=e.mensajeToast,a=e.toastAbierto;return Object(ge.jsxs)("div",{className:"auth__main",children:[a&&Object(ge.jsx)(Se,{error:t.error}),Object(ge.jsx)("div",{className:"auth__box-container",children:Object(ge.jsxs)(i.d,{children:[Object(ge.jsx)(i.b,{exact:!0,path:"/auth/login",component:_e}),Object(ge.jsx)(i.b,{exact:!0,path:"/auth/register",component:Ae}),Object(ge.jsx)(i.a,{to:"/auth/login"})]})})]})},Ie=function(e){var t=e.size;return Object(ge.jsx)("div",{className:"spinner spinner-".concat(t)})},Pe=a(36),Te=function(e){var t=e.isAuthenticated,a=e.component,n=Object(Pe.a)(e,["isAuthenticated","component"]);return Object(ge.jsx)(i.b,Object(d.a)(Object(d.a)({},n),{},{component:function(e){return t?Object(ge.jsx)(a,Object(d.a)({},e)):Object(ge.jsx)(i.a,{to:"/auth/login"})}}))},Ue=function(e){var t=e.isAuthenticated,a=e.component,n=Object(Pe.a)(e,["isAuthenticated","component"]);return Object(ge.jsx)(i.b,Object(d.a)(Object(d.a)({},n),{},{component:function(e){return t?Object(ge.jsx)(i.a,{to:"/dentaltask"}):Object(ge.jsx)(a,Object(d.a)({},e))}}))},Le=function(e){var t=e.estado,a=e.date,c=e.horario,r=e.label,s=e.onChange,i=Object(o.b)(),u=Object(n.useState)(!1),d=Object(l.a)(u,2),j=d[0],b=d[1];if(a&&0!==new Date(a).getHours()&&!j){var h=new Date(a).getHours();a="".concat(h,":00 - ").concat(h+1,":00")}Object(n.useEffect)((function(){"CANCELADA"===t&&b(!0)}),[t]);return Object(ge.jsxs)("div",{className:"radio-button mb-5",children:[s?Object(ge.jsx)("input",{disabled:j,className:"".concat(c||0!==new Date(a).getHours()?"":"error"),value:c,onChange:s,type:"radio",name:"card"}):Object(ge.jsx)("input",{value:c,onChange:function(e){return i(function(e){var t=e.target;return{type:z,payload:{horario:t.value}}}(e))},type:"radio",name:"card"}),Object(ge.jsxs)("label",{className:"radio-button__label",htmlFor:"card",children:[Object(ge.jsxs)("h5",{className:"radio-button__label-heading ".concat(j?"canceled":""),children:[r,":"]}),Object(ge.jsx)("h6",{className:"radio-button__label-subheading ".concat(c||0!==new Date(a).getHours()?j?"canceled":"":"error"),children:a&&0!==new Date(a).getHours()&&"CANCELADA"!==t?a:c?"".concat(c,":00 - ").concat(c+1,":00"):function(e){switch(e){case"CANCELADA":return"Cancelada";case"PENDIENTE":return"Pendiente"}}(t)})]})]})},Re=function(){var e=Object(o.b)(),t=Object(i.g)()._id,a=Object(n.useState)([]),c=Object(l.a)(a,2),r=c[0],s=c[1],u=Object(n.useState)(""),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(n.useState)(""),O=Object(l.a)(f,2),p=O[0],x=O[1];Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(h.a.mark((function e(){var a,n,c,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t);case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,c=n.horariosDisponibles,r=n.nombre,i=n.fecha,s(c),b(r),x(i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);return Object(ge.jsx)("div",{className:"schedule__main",children:Object(ge.jsxs)("div",{className:"schedule__box-container",children:[Object(ge.jsxs)("h3",{className:"auth__title mb-5",children:["Hola ",j,"!"]}),Object(ge.jsxs)("h3",{className:"auth__subtitle mb-5",children:["Estos son los espacios disponibles el d\xeda ",p,":"]}),r.map((function(e){return Object(ge.jsx)(Le,{horario:e,label:"Hora"},e)})),Object(ge.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",paddingTop:"10px"},children:[Object(ge.jsx)(we,{group:!0,warning:!0,text:"Cambiar fecha"}),Object(ge.jsx)(we,{clickable:!0,onClick:function(){e(function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a,n){var c,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n().horarios.horarioActivo,parseInt(c),t.next=4,ne(e,c);case 4:return r=t.sent,t.next=7,r.json();case 7:s=t.sent,console.log(s);case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(t)),setTimeout((function(){window.location.reload()}),1e3)},group:!0,text:"Agendar"})]})]})})},ze=function(e){var t=e.dateDisplay,a=e.onNext,n=e.onBack;return Object(ge.jsxs)("div",{className:"calendar__header",children:[Object(ge.jsx)(we,{clickable:!0,onClick:n,group:!0,text:Object(ge.jsx)("i",{className:"fas fa-arrow-left"})}),Object(ge.jsx)("div",{className:"mb-5",children:t}),Object(ge.jsx)(we,{clickable:!0,onClick:a,group:!0,text:Object(ge.jsx)("i",{className:"fas fa-arrow-right"})})]})},Fe=function(e){var t,a=e.day,n=e.onClick,c=JSON.parse(localStorage.getItem("config"))||{citasCanceladasEnCalendario:!1,citasCompletadasEnCalendario:!1};return Object(ge.jsxs)("div",{onClick:n,className:"calendar__day ".concat((null===a||void 0===a?void 0:a.esHoy)?"calendar__day-active":""),children:[Object(ge.jsx)("span",{children:"padding"!==a.value&&a.value}),Object(ge.jsx)("div",{className:"calendar__day-group",children:(null===(t=a.citas)||void 0===t?void 0:t.length)>0&&a.citas.map((function(e,t){var a=e.estado;return!(!c.citasCanceladasEnCalendario&&"CANCELADA"===a||!c.citasCompletadasEnCalendario&&"COMPLETADA"===a)&&Object(ge.jsx)("div",{className:"calendar__day-event ".concat("PENDIENTE"===a?"pending":"CANCELADA"===a?"canceled":"COMPLETADA"===a?"complete":"")},t)}))})]})},qe=function(){return{type:L}},Me=function(e){return{type:T,payload:e}},Ge=function(e){return{type:U,payload:e}},Je=function(e){return{type:D,payload:e}},He=function(){return function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,Z(a);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,(r=c.pacientes).length>0?t(We(r)):t(We([]));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},We=function(e){return{type:S,payload:{pacientes:Object(Ce.a)(e)}}},Be=function(e){return{type:I,payload:Object(d.a)({},e)}},Ke=function(){return{type:P}},Qe=function(e){return{type:y,payload:Object(d.a)({},e)}},Ve=function(){return{type:N}},Xe=function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a,n){var c,r,s,i,o,l,u,d,j;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n().pacientes.citasPorPaciente,r=n().ui.diaActivo,s=c.map((function(t){return t._id===e._id?e:t})),Object.keys(r).length>0&&(r.citas=r.citas.map((function(t){return t._id===e._id?e:t})),a(me(r))),i=localStorage.getItem("token"),t.next=7,K(i,e);case 7:return o=t.sent,t.next=10,o.json();case 10:l=t.sent,u=l.ok,d=l.msg,j=l.newCita,u&&(a(je(d)),a(Ye(j)),a(Me(s)),a(Ze()));case 15:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Ye=function(e){return{type:k,payload:e}},Ze=function(){return{type:A}},$e=function(e,t){return function(){var a=Object(m.a)(h.a.mark((function a(n,c){var r,s,i,o,l,u,j;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=localStorage.getItem("token"),a.next=3,Q(r,e,t);case 3:return s=a.sent,a.next=6,s.json();case 6:i=a.sent,o=i.ok,l=i.msg,u=i.newCita,j=c().ui.diaActivo,o&&(j.citas=[u].concat(Object(Ce.a)(j.citas)),n(je(l)),n((b=u,{type:E,payload:Object(d.a)({},b)})),n(me(j)));case 12:case"end":return a.stop()}var b}),a)})));return function(e,t){return a.apply(this,arguments)}}()},et=function(){return function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,B(a);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,(r=c.citas).length>0?t(tt(r)):t(tt([]));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},tt=function(e){return{type:C,payload:{citas:Object(Ce.a)(e)}}},at=function(){var e=Object(o.b)(),t=Object(n.useState)(0),a=Object(l.a)(t,2),c=a[0],r=a[1],s=function(e,t){var a=Object(n.useState)(""),c=Object(l.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)([]),o=Object(l.a)(i,2),u=o[0],d=o[1];return Object(n.useEffect)((function(){var a=function(t){return e.filter((function(e){return new Date(e.fechaDeseada).toDateString()===new Date(t).toDateString()&&e}))},n=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},c=new Date;0!==t&&c.setMonth((new Date).getMonth()+t);var r=c.getDate(),i=c.getMonth(),o=c.getFullYear(),l=new Date(o,i,1),u=new Date(o,i+1,0).getDate(),j=n(l.toLocaleDateString("es-us",{weekday:"long",year:"numeric",month:"numeric",day:"numeric"}).split(", ")[0]),b=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"].indexOf(j);s("".concat(n(c.toLocaleDateString("es",{month:"long"}))));for(var h=[],m=1;m<=b+u;m++){var f="".concat(i+1,"/").concat(m-b,"/").concat(o);m>b?h.push({value:m-b,citas:a(f),esHoy:f.split("/")[1]===r.toString()&&0===t,date:f}):h.push({value:"padding",citas:null,esHoy:!1,date:""})}d(h)}),[e,t]),[u,r]}(Object(o.c)((function(e){return e.citas})).totalCitas,c),i=Object(l.a)(s,2),u=i[0],d=i[1];Object(n.useEffect)((function(){e(et())}),[e]);return Object(ge.jsxs)("div",{className:"main-container",children:[Object(ge.jsx)(ze,{onNext:function(){return r(c+1)},onBack:function(){return r(c-1)},dateDisplay:d}),Object(ge.jsxs)("div",{className:"calendar__weekdays",children:[Object(ge.jsx)("div",{children:"Domingo"}),Object(ge.jsx)("div",{children:"Lunes"}),Object(ge.jsx)("div",{children:"Martes"}),Object(ge.jsx)("div",{children:"Mi\xe9rcoles"}),Object(ge.jsx)("div",{children:"Jueves"}),Object(ge.jsx)("div",{children:"Viernes"}),Object(ge.jsx)("div",{children:"S\xe1bado"})]}),Object(ge.jsx)("div",{className:"calendar__content",children:u.map((function(t,a){return Object(ge.jsx)(Fe,{day:t,onClick:function(){return function(t){"padding"!==t.value&&(e(de("CALENDARIO")),e(me(t)))}(t)}},a)}))})]})},nt=function(){return Object(ge.jsx)("h1",{children:"Soy las citas"})},ct=function(){var e=JSON.parse(localStorage.getItem("config"))||{citasCanceladasEnCalendario:!1,citasCompletadasEnCalendario:!1},t=Object(n.useRef)(!0),a=Object(n.useState)(""),c=Object(l.a)(a,2),r=c[0],s=c[1],i=Object(o.c)((function(e){return e.auth})).uid,u=Object(o.b)(),d=Object(o.c)((function(e){return e.ui})),j=d.mensajeToast,b=d.toastAbierto,f=d.modalAbierto,O=Object(n.useState)(e.citasCanceladasEnCalendario),p=Object(l.a)(O,2),x=p[0],v=p[1],g=Object(n.useState)(e.citasCompletadasEnCalendario),y=Object(l.a)(g,2),N=y[0],_=y[1];return Object(n.useEffect)((function(){t.current?t.current=!1:localStorage.setItem("config",JSON.stringify({citasCompletadasEnCalendario:N,citasCanceladasEnCalendario:x}))}),[x,N]),Object(ge.jsxs)(ge.Fragment,{children:[b&&!f&&Object(ge.jsx)(Se,{context:"screen",success:!0,error:j.error}),Object(ge.jsx)("div",{className:"main-container",children:Object(ge.jsxs)("div",{style:{display:"flex",width:"50%",margin:"0 auto",flexDirection:"column",height:"100%"},children:[Object(ge.jsxs)("div",{className:"mt-10",style:{marginBottom:"auto"},children:[Object(ge.jsx)(Ee,{handleCheck:function(){return v(!x)},checked:e.citasCanceladasEnCalendario,setting:"\xbfQuieres que aparezcan las citas canceladas en el calendario?",helpMessage:"No las vas a borrar del sistema, solo no van a aparecer en tu calendario."}),Object(ge.jsx)(Ee,{handleCheck:function(){return _(!N)},checked:e.citasCompletadasEnCalendario,setting:"\xbfQuieres que aparezcan las citas completadas en el calendario?",helpMessage:"No las vas a borrar del sistema, solo no van a aparecer en tu calendario."}),Object(ge.jsxs)("div",{className:"mt-10",style:{display:"flex",justifyContent:"space-around"},children:[Object(ge.jsx)("h5",{children:"Quieres reiniciar tu contrase\xf1a?"}),Object(ge.jsx)(ye,{onKeyDown:function(e){var t,a;"Enter"===e.key&&u((t=i,a={pwd:r},function(){var e=Object(m.a)(h.a.mark((function e(n,c){var r,s,i,o,l,u,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),e.next=3,ue(r,t,a);case 3:return s=e.sent,e.next=6,s.json();case 6:i=e.sent,o=i.ok,l=i.msg,u=i.newUser,d=c().usuarios.totalUsers,o&&(d=d.map((function(e){return e._id===u._id?u:e})),n(ke(d)),n(je(l)));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())),s("")},handleInputChange:function(e){var t=e.target;return s(t.value)},name:"newPwd",placeholder:"Escribe aqui tu nueva contrase\xf1a...",type:"password",errors:{}})]}),Object(ge.jsxs)("span",{style:{fontSize:"11px",fontWeight:"400"},children:["Cuando estes listo, presiona ",Object(ge.jsx)("kbd",{children:"Enter \u21a9"})]})]}),Object(ge.jsxs)("div",{children:[Object(ge.jsx)("div",{className:"mt-10 mb-5",style:{width:"100%",textAlign:"center"},children:Object(ge.jsx)("a",{href:"/mypadre",style:{textAlign:"center",width:"100%"},children:"Manual de usuario"})}),Object(ge.jsx)("div",{className:"mb-10",style:{width:"100%",textAlign:"center"},children:Object(ge.jsx)("a",{href:"/mypadre",style:{textAlign:"center",width:"100%"},children:"Acerca del sistema"})})]})]})})]})},rt=function(e){var t=e.data,a=e.heading,n=e.time,c=e.text;return Object(ge.jsx)("div",{className:"dashboard-table",children:Object(ge.jsxs)("div",{className:"dashboard-table__content",children:[Object(ge.jsxs)("h3",{children:[a,":"]}),Object(ge.jsxs)("div",{className:"dashboard-table__heading",children:[Object(ge.jsx)("span",{className:"big",children:" ".concat(null===t||void 0===t?void 0:t.length," ")}),n&&Object(ge.jsxs)("span",{className:"monthly",children:["/ ",n,"."]})]}),Object(ge.jsx)("div",{className:"dashboard-table__description",children:Object(ge.jsxs)("span",{children:["".concat(c||"Lorem ipsum dolor sit amet consectetur adipisicing elit. Assumenda autem mollitia asperiores. Itaque amet consequatur consequuntur reiciendis aut sapiente dicta, dolor dolorem! Dolor beatae ratione iusto, quae ut dicta ea.")," "]})}),Object(ge.jsx)("div",{className:"dashboard-table__features",children:Object(ge.jsx)("ul",{children:t.map((function(e,t){return Object(ge.jsx)("li",{children:"".concat(new Date(e.fechaDeseada).toLocaleDateString("es-us")," - ").concat(e.nombre," ").concat(e.apellido)},t)}))})})]})})},st=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.citas})).totalCitas;Object(n.useEffect)((function(){return e(et())}),[e]);var a=new Date,c=a.getDate(),r=a.getDay(),s=new Date(a.setDate(c-r+1)),i=new Date(s);i.setDate(i.getDate()+5);var l=t.filter((function(e){return new Date(e.fechaDeseada)>=s&&new Date(e.fechaDeseada)<=i&&"AGENDADA"===e.estado&&e})),u=t.filter((function(e){return new Date(e.fechaDeseada)>=s&&new Date(e.fechaDeseada)<=i&&"PENDIENTE"===e.estado})),d=t.filter((function(e){return new Date(e.fechaDeseada)>=s&&new Date(e.fechaDeseada)<=i&&"CANCELADA"===e.estado}));return Object(ge.jsxs)("div",{className:"main-container",children:[Object(ge.jsx)("h1",{style:{textAlign:"center",marginTop:"1.5rem",marginBottom:"-3rem",fontWeight:"500"},children:"Informaci\xf3n importante: "}),Object(ge.jsxs)("div",{className:"dashboard-home",children:[Object(ge.jsx)(rt,{data:l,heading:"Citas agendadas",time:"esta semana",text:"Abajo puedes encontrar la fecha y el paciente de las citas actualmente agendadas. Si ves un bot\xf3n de completar quiere decir que la fecha h\xe1bil de esta cita ya pas\xf3, compl\xe9tala."}),Object(ge.jsx)(rt,{data:u,heading:"Citas sin confirmar",time:"esta semana",text:"Abajo vas a encontrar los pacientes que crearon una cita en la p\xe1gina web, pero no han confirmado el horario, puedes ir al m\xf3dulo de Pacientes y contactar al paciente para confirmar su cita."}),Object(ge.jsx)(rt,{data:d,heading:"Citas canceladas",time:"esta semana",text:"Abajo vas a encontrar las citas que fueron canceladas esta semana, puedes contactar al paciente y/o doctor para reagendar de ser necesario."})]})]})},it=function(e,t){var a=Object(n.useState)(1),c=Object(l.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)(0),o=Object(l.a)(i,2),u=o[0],d=o[1],j=r*t,b=j-t,h=e.length>8||1===t?e.slice(b,j):e.slice(0,8);Object(n.useEffect)((function(){for(var a=[],n=1;n<=Math.ceil(e.length/t);n++)a.push(n),d(a.pop())}),[e,t,d]);return[h,r,function(e){switch(e){case"back":r>1&&s(r-1);break;case"next":r<u&&s(r+1);break;default:return}},u]},ot=function(e){var t=e.isEdit,a=e.search,c=e.value,r=e.label,s=e.handleInputChange,i=e.name,u=Object(n.useState)(!1),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(n.useState)(""),O=Object(l.a)(f,2),p=O[0],x=O[1],v=Object(o.b)();Object(n.useEffect)((function(){t&&b(!0)}),[t]);var g=Object(n.useRef)(null);Object(n.useEffect)((function(){g.current.focus()}),[j]);var y=function(e){e.preventDefault(),a&&!j&&v(function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var n,c,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),t.next=3,Y(n,e);case 3:return c=t.sent,t.next=6,c.json();case 6:(null===(r=t.sent)||void 0===r?void 0:r.ok)&&(a(je(r.msg)),a(We(r.pacientes)));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(p)),b(!j)};return Object(ge.jsxs)("div",{className:"input-group ".concat(a&&"mt-10"),children:[!a&&Object(ge.jsxs)("label",{htmlFor:i,children:[r,":"]}),Object(ge.jsxs)("div",{className:"input-group__main",children:[Object(ge.jsx)("input",{className:"".concat(a?"search":""),placeholder:a&&"Buscar...",autoComplete:"off",name:i,ref:g,disabled:j,type:"text",value:c,onChange:a?function(e){return function(e){var t=e.target;return x(t.value)}(e)}:s}),Object(ge.jsx)("button",{className:"input-group_button",onClick:function(e){return y(e)},children:a?Object(ge.jsx)("i",{className:"fas fa-search"}):j?"Editar":"Guardar"})]})]})},lt=function(e){var t=e.nombre,a=e.fecha,n=e.pacienteId,c=e.fileId,r=new Date(a),s=Object(o.b)(),i=function(){return s(function(e,t,a){return function(){var n=Object(m.a)(h.a.mark((function n(c,r){var s,i,o,l;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=(s=r().pacientes.archivosPorPaciente).filter((function(t){return t._id!==e})),i=localStorage.getItem("token"),n.next=5,se(a,t,i);case 5:return o=n.sent,n.next=8,o.json();case 8:l=n.sent,console.log(s),(null===l||void 0===l?void 0:l.ok)&&(c(je(l.msg)),c(Ge(s)));case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(c,t,n))},l=function(){return s(function(e,t){return function(){var a=Object(m.a)(h.a.mark((function a(n){var c,r,s,i,o;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=localStorage.getItem("token"),a.next=3,ie(t,e,c);case 3:return r=a.sent,console.log(r.body),a.next=7,r.blob();case 7:s=a.sent,console.log(s),console.log("estoy llegando aca"),i=window.URL.createObjectURL(s),(o=document.createElement("a")).href=i,o.download=e,o.click();case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,n))};return Object(ge.jsxs)("div",{className:"grid__body-item",children:[Object(ge.jsx)("span",{className:"col-1-of-4",children:t}),Object(ge.jsx)("span",{className:"col-1-of-4",children:r.toLocaleDateString()}),Object(ge.jsx)("span",{onClick:function(){return i()},className:"col-1-of-4",children:Object(ge.jsx)("i",{className:"fas fa-trash-alt delete"})}),Object(ge.jsx)("span",{onClick:function(){return l()},className:"col-1-of-4",children:Object(ge.jsx)("i",{className:"fas fa-download download"})})]})},ut=function(e){var t=e.paciente._id,a=Object(o.b)(),c=Object(o.c)((function(e){return e.pacientes})).archivosPorPaciente;Object(n.useEffect)((function(){return a(function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var n,c,r,s,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),t.next=3,re(e,n);case 3:return c=t.sent,t.next=6,c.json();case 6:r=t.sent,s=r.ok,i=r.archivos,s&&a(Ge(i));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t,a]);var r=Object(n.useState)(""),s=Object(l.a)(r,2),i=s[0],u=s[1],d=Object(n.useState)(""),j=Object(l.a)(d,2),b=j[0],f=j[1];return Object(ge.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},children:[Object(ge.jsxs)("div",{className:"grid",children:[Object(ge.jsxs)("div",{className:"grid__header",children:[Object(ge.jsx)("h5",{children:"Nombre"}),Object(ge.jsx)("h5",{children:"Fecha Subido"})]}),Object(ge.jsx)("div",{className:"grid__body",children:c.length>0&&c.map((function(e){var t=e.nombreArchivo,a=e.fechaCreado,n=e.idPaciente,c=e._id;return Object(ge.jsx)(lt,{fileId:c,pacienteId:n,nombre:t,fecha:a},c)}))})]}),""!==b&&Object(ge.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-evenly",width:"50%",marginBottom:"1rem"},children:[Object(ge.jsx)("span",{style:{fontSize:"1.2rem",fontWeight:"300"},children:b}),Object(ge.jsx)("i",{onClick:function(){a(function(e,t){return function(){var a=Object(m.a)(h.a.mark((function a(n,c){var r,s,i,o,l,u,d,j;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=c().pacientes.archivosPorPaciente,s=localStorage.getItem("token"),(i=new FormData).append("file",e),a.next=6,ce(t,i,s);case 6:return o=a.sent,a.next=9,o.json();case 9:l=a.sent,u=l.ok,d=l.msg,j=l.archivo,console.log(u),console.log(r),u&&(n(Ge([].concat(Object(Ce.a)(r),[j]))),n(je(d)));case 16:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}(i,t)),f("")},style:{fontSize:"1.2rem",fontWeight:"300"},className:"fas fa-check-square"})]}),Object(ge.jsxs)("div",{style:{minWidth:"36%"},className:"btn pointer mb-5 btn__primary",enctype:"multipart/form-data",children:[Object(ge.jsx)("input",{onChange:function(e){return function(e){u(e.target.files[0]),f(e.target.files[0].name)}(e)},id:"file",className:"dashboard__input-file",name:"file",type:"file"}),Object(ge.jsx)("label",{className:"dashboard__input-label",htmlFor:"file",children:"A\xf1adir archivo"})]})]})},dt=function(e){var t=e.name,a=e.handleInputChange,n=e.value,c=e.placeholder,r=e.disabled;return Object(ge.jsx)("textarea",{disabled:r,onChange:a,placeholder:c,value:n,className:"textarea",name:t,cols:"30",rows:"10"})},jt=function(e){var t=e.cita,a=Object(o.b)(),c=function(e,t){var a=Object(l.a)(e,1)[0],c=Object(n.useState)(!1),r=Object(l.a)(c,2),s=r[0],i=r[1],o=Object(n.useState)((null===a||void 0===a?void 0:a.nota)||"No hay notas para esta cita, agrega una!"),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(n.useState)(""),h=Object(l.a)(b,2),m=h[0],f=h[1],O=Object(n.useRef)(a._id),p=new Date(null===a||void 0===a?void 0:a.fechaDeseada).toLocaleDateString(),x="Invalid Date"===p?"No hay citas":p,v=null===a||void 0===a?void 0:a.estado;Object(n.useEffect)((function(){O.current!==a._id&&(j((null===a||void 0===a?void 0:a.nota)||"No hay notas para esta cita, agrega una!"),O.current=a._id),f(g(v))}),[a,v]);var g=function(e){return"CANCELADA"===e?"Cancelada":"AGENDADA"===e?"Agendada":"PENDIENTE"===e?"Pendiente":"COMPLETADA"===e?"Completada":""};return[s,function(){i(!s),s&&t()},d,function(e){var t=e.target;j(t.value)},m,v,x]}(t,(function(){return a(Xe(Object(d.a)(Object(d.a)({},t[0]),{},{nota:u})))})),r=Object(l.a)(c,7),s=r[0],i=r[1],u=r[2],j=r[3],b=r[4],h=r[5],m=r[6];return Object(ge.jsxs)("div",{className:"card-container",children:[Object(ge.jsxs)("div",{className:"".concat("CANCELADA"===h?"cancelada":"AGENDADA"===h?"agendada":"PENDIENTE"===h?"pendiente":"completada"," card-header"),children:[Object(ge.jsxs)("span",{children:[" ","".concat(m," |")," "]}),Object(ge.jsx)("h5",{children:"| ".concat(b,"  ")})]}),Object(ge.jsxs)("div",{className:"card-content",children:[Object(ge.jsx)(dt,{disabled:!s,handleInputChange:j,placeholder:u,value:u,name:"email"}),Object(ge.jsx)("span",{})]}),Object(ge.jsx)("div",{className:"card-actions",children:Object(ge.jsx)("span",{onClick:i,className:"link",children:s?"Guardar Nota":"Editar Nota"})})]})},bt=function(e){var t=e.paciente._id,a=Object(o.b)(),c=Object(o.c)((function(e){return e.pacientes})).citasPorPaciente,r=it(c,1),s=Object(l.a)(r,4),i=s[0],u=s[1],d=s[2],j=s[3];return Object(n.useEffect)((function(){a(function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var n,c,r,s,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),t.next=3,$(n,e);case 3:return c=t.sent,t.next=6,c.json();case 6:r=t.sent,s=r.ok,i=r.citas,s&&a(Me(i));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t,a]),Object(ge.jsx)(ge.Fragment,{children:c.length<=0?Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)("i",{className:"fas fa-info-circle",children:Object(ge.jsx)("span",{children:" No hay citas para este paciente "})})}):Object(ge.jsxs)(ge.Fragment,{children:[1!==c.length&&1!==u&&Object(ge.jsx)("i",{onClick:function(){return d("back")},className:"fas fa-arrow-left"}),Object(ge.jsx)(jt,{cita:i}),1!==c.length&&u!==j&&Object(ge.jsx)("i",{onClick:function(){return d("next")},className:"fas fa-arrow-right"})]})})},ht=function(e){var t=e.paciente;return Object(ge.jsxs)("div",{className:"dashboard",children:[Object(ge.jsxs)("div",{className:"dashboard__files",children:[Object(ge.jsxs)("h1",{className:"dashboard__heading",children:[Object(ge.jsx)("i",{className:"fas fa-folder-open"})," Archivos del paciente"]}),Object(ge.jsx)("div",{className:"dashboard__main-content",children:Object(ge.jsx)(ut,{paciente:t})})]}),Object(ge.jsxs)("div",{className:"dashboard__appointments",children:[Object(ge.jsxs)("h1",{className:"dashboard__heading",children:[Object(ge.jsx)("i",{className:"fas fa-calendar-check"})," Citas previas"]}),Object(ge.jsx)("div",{className:"dashboard__main-content",children:Object(ge.jsx)(bt,{paciente:t})})]})]})},mt=function(e){var t=e.nombre,a=e.apellido,n=e.email,c=e.numeroTelefonico,r=e.cedula,s={};return 0===t.trim().length&&(s.nombre="Escribe un nombre v\xe1lido"),0===r.trim().length&&(s.cedula="Escribe una c\xe9dula v\xe1lida"),0===a.trim().length&&(s.apellido="Escribe un nombre v\xe1lido"),0===n.trim().length&&(s.email="Escribe un nombre v\xe1lido"),/\S+@\S+\.\S+/.test(n)||(s.email="El correo es inv\xe1lido"),0===c.trim().length&&(s.numeroTelefonico="Escribe un nombre v\xe1lido"),s},ft=function(e){var t=e.handleClose,a=e.isEdit,c=Object(o.b)(),r=Object(o.c)((function(e){return e.pacientes})).pacienteActivo,s=Object(n.useRef)(null===r||void 0===r?void 0:r._id),i=j(r||{nombre:"",apellido:"",cedula:"",email:"",numeroTelefonico:""},mt,(function(){return c(a?(e=b,function(){var t=Object(m.a)(h.a.mark((function t(a,n){var c,r,s,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=(c=n().pacientes.totalPacientes).map((function(t){return t._id===e._id?e:t})),r=localStorage.getItem("token"),t.next=5,ee(r,e);case 5:return s=t.sent,t.next=8,s.json();case 8:(null===(i=t.sent)||void 0===i?void 0:i.ok)&&(a(je(i.msg)),a(Je(e)),a(We(c)));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()):function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a,n){var c,r,s,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n().pacientes.totalPacientes,r=localStorage.getItem("token"),t.next=4,X(r,e);case 4:return s=t.sent,t.next=7,s.json();case 7:i=t.sent,console.log(c),(null===i||void 0===i?void 0:i.ok)&&(a(je(i.msg)),a(Je(i.createdUser)),a(We([].concat(Object(Ce.a)(c),[i.createdUser]))),a(Ke()),a(he()),a(et()));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(b));var e})),u=Object(l.a)(i,5),b=u[0],f=u[1],O=u[2],p=u[3],x=u[4],v=b.nombre,g=b.apellido,y=b.email,N=b.numeroTelefonico,_=b.cedula;return Object(n.useEffect)((function(){(null===s||void 0===s?void 0:s.current)!==(null===r||void 0===r?void 0:r._id)&&(x(Object(d.a)({},r)),s.current=null===r||void 0===r?void 0:r._id)}),[r,x]),Object(n.useEffect)((function(){c(Be(b))}),[b,c]),console.log(p),Object(ge.jsxs)("div",{className:"edit-form__box-container ".concat(a?"edit":""," "),children:[Object(ge.jsx)("div",{className:"edit-form__action-bar ".concat(a?"edit":""," "),children:Object(ge.jsxs)("div",{className:"edit-form__action-bar-group",children:[t&&Object(ge.jsx)("div",{onClick:t,className:"edit-form__action-bar-item",children:Object(ge.jsx)("i",{className:"far fa-window-close"})}),Object(ge.jsx)("div",{className:"edit-form__action-bar-item",children:Object(ge.jsx)("span",{children:a?"Editar Paciente:":"Crear Paciente:"})})]})}),Object(ge.jsxs)("form",{className:"edit-form__form-container ".concat(a?"edit":""),children:[Object(ge.jsx)(ot,{isEdit:a,name:"nombre",label:"Nombre",handleInputChange:f,value:v}),Object(ge.jsx)(ot,{isEdit:a,name:"apellido",label:"Apellido",handleInputChange:f,value:g}),Object(ge.jsx)(ot,{isEdit:a,name:"cedula",label:"C\xe9dula",handleInputChange:f,value:_}),Object(ge.jsx)(ot,{isEdit:a,name:"email",handleInputChange:f,value:y,label:"Email"}),Object(ge.jsx)(ot,{isEdit:a,name:"numeroTelefonico",handleInputChange:f,value:N,label:"N\xfamero telef\xf3nico"}),Object(ge.jsx)("div",{className:"edit-form__action-bar-group",children:Object(ge.jsx)(we,{onClick:O,clickable:!0,text:"Guardar"})})]})]})},Ot=function(e){var t=e.pacientes,a=e.style,n=Object(o.b)();return Object(ge.jsx)("div",{style:a,className:"list",children:Object(ge.jsx)("ul",{children:t.map((function(e){return Object(ge.jsx)("li",{onClick:function(){return function(e){n(Be(e))}(e)},children:Object(ge.jsxs)("span",{children:[e.nombre," ",e.apellido]})},e._id)}))})})},pt=function(){var e,t=Object(o.b)(),a=Object(o.c)((function(e){return e.ui})),c=a.mensajeToast,r=a.toastAbierto,s=a.modalAbierto,i=Object(o.c)((function(e){return e.pacientes})),u=i.isPacienteActive,d=i.pacienteActivo,j=i.totalPacientes,b=it(j,8),h=Object(l.a)(b,3),m=h[0],f=h[1],O=h[2],p=m.length<8?{marginBottom:"auto"}:{};return Object(n.useEffect)((function(){t(He())}),[t]),Object(ge.jsxs)(ge.Fragment,{children:[r&&!s&&Object(ge.jsx)(Se,{context:"screen",success:(e=c.error,"Necesitas buscar algo v\xe1lido"!==e),error:c.error}),Object(ge.jsxs)("div",{style:{width:"100%",display:"flex"},children:[Object(ge.jsxs)("div",{className:"secondary-container",children:[Object(ge.jsx)("div",{className:"main-container__search-group",children:Object(ge.jsx)("form",{action:"",children:Object(ge.jsx)(ot,{name:"busqueda",search:!0})})}),Object(ge.jsx)(Ot,{style:p,pacientes:m}),j.length>8&&Object(ge.jsxs)("div",{style:{marginTop:"-3rem"},className:"calendar__header",children:[Object(ge.jsx)(we,{clickable:!0,onClick:function(){return O("back")},group:!0,text:Object(ge.jsx)("i",{className:"fas fa-arrow-left"})}),Object(ge.jsx)("div",{className:"mb-5",children:f}),Object(ge.jsx)(we,{clickable:!0,onClick:function(){return O("next")},group:!0,text:Object(ge.jsx)("i",{className:"fas fa-arrow-right"})})]})]}),Object(ge.jsx)("div",{style:{width:"60%"},className:"main-container",children:u?Object(ge.jsxs)("div",{className:"d-flex",style:{justifyContent:"flex-start",alignItems:"center",height:"100%"},children:[Object(ge.jsx)(ft,{isEdit:u}),Object(ge.jsx)(ht,{paciente:d})]}):Object(ge.jsx)("div",{className:"d-flex",children:Object(ge.jsxs)("div",{className:"main-container__banner",children:[Object(ge.jsxs)("div",{children:[Object(ge.jsx)(Ie,{size:"big"}),Object(ge.jsx)("h1",{children:"Escoje un paciente a la izquierda "})]}),Object(ge.jsx)("h1",{children:"o"}),Object(ge.jsxs)("div",{children:[Object(ge.jsx)("i",{onClick:function(){return t(de("PACIENTES"))},className:"fas fa-user-injured"}),Object(ge.jsx)("h1",{children:"Crea un paciente."})]})]})})})]})]})},xt=function(e){var t=e.handleState,a=Object(o.c)((function(e){return e.ui.diaActivo})).date,c=Object(n.useState)([]),r=Object(l.a)(c,2),s=r[0],i=r[1],u=Object(n.useState)(!1),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(n.useState)("Seleccione el horario"),O=Object(l.a)(f,2),p=O[0],x=O[1];Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(h.a.mark((function e(){var t,n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,ae(a,t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,(r=c.horariosDisponibles).sort((function(e,t){return e-t})),i(r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a]);var v=function(e){return"".concat(e,":00 - ").concat(e+1,":00")};return Object(ge.jsxs)("div",{style:{width:"70%"},className:"select__box",children:[Object(ge.jsxs)("div",{className:"select__box__placeholder ".concat(j&&"active"),children:[p,Object(ge.jsx)("i",{onClick:function(){return b(!j)},className:"fas fa-caret-square-down"})]}),Object(ge.jsx)("div",{className:"select__box-options ".concat(j&&"active"),children:s.map((function(e){return Object(ge.jsxs)("div",{onClick:function(){return function(e,n){b(!j),x(n);var c=new Date(a);c.setHours(e),t(c)}(e,v(e))},className:"select__box-option",children:[Object(ge.jsx)("input",{type:"radio",className:"select__box-radio",id:e,name:e}),Object(ge.jsx)("label",{htmlFor:e,children:v(e)})]},e)}))})]})},vt=function(e){var t=e.handleState,a=Object(o.b)(),c=Object(o.c)((function(e){return e.pacientes})).totalPacientes,r=Object(n.useState)("Seleccione el paciente"),s=Object(l.a)(r,2),i=s[0],u=s[1],d=Object(n.useState)(!1),j=Object(l.a)(d,2),b=j[0],h=j[1];Object(n.useEffect)((function(){a(He())}),[a]);return Object(ge.jsxs)("div",{style:{width:"70%"},className:"select__box",children:[Object(ge.jsxs)("div",{className:"select__box__placeholder ".concat(b&&"active"),children:[i,Object(ge.jsx)("i",{onClick:function(){return h(!b)},className:"fas fa-caret-square-down"})]}),Object(ge.jsx)("div",{className:"select__box-options ".concat(b&&"active"),children:c.map((function(e){return Object(ge.jsxs)("div",{onClick:function(){return function(e){h(!b),u("".concat(e.nombre," ").concat(e.apellido," - ").concat(e.cedula)),t(e)}(e)},className:"select__box-option",children:[Object(ge.jsx)("input",{type:"radio",className:"select__box-radio",id:e._id,name:e.nombre}),Object(ge.jsx)("label",{htmlFor:e.nombre,children:"".concat(e.nombre," ").concat(e.apellido," - ").concat(e.cedula)})]},e._id)}))})]})},gt=function(){var e=Object(o.b)(),t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)({}),i=Object(l.a)(s,2),u=i[0],d=i[1],j=function(){var t=Object(m.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),""!==c&&0!==Object.keys(u).length&&u.constructor===Object?e($e(u,c)):e(je("Necesitas llenar los 2 valores"));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(ge.jsxs)("div",{className:"edit-form__box-container create",children:[Object(ge.jsx)("div",{className:"edit-form__action-bar"}),Object(ge.jsxs)("form",{className:"edit-form__form-container",children:[Object(ge.jsx)("div",{className:"edit-form__form-container-title",children:Object(ge.jsxs)("h2",{children:[Object(ge.jsx)("i",{className:"fas fa-edit"}),"Crear cita:"]})}),Object(ge.jsx)(vt,{handleState:d}),Object(ge.jsx)(xt,{handleState:r}),Object(ge.jsx)("div",{className:"edit-form__action-bar-group",children:Object(ge.jsx)(we,{onClick:function(e){return j(e)},clickable:!0,text:"Guardar"})})]})]})},yt=function(e){var t=e.nombre,a=e.apellido,n=e.email,c=e.numeroTelefonico,r={};return 0===t.trim().length&&(r.nombre="Escribe un nombre v\xe1lido"),0===a.trim().length&&(r.apellido="Escribe un apellido v\xe1lido"),0===n.trim().length&&(r.email="Escribe un email v\xe1lido"),/\S+@\S+\.\S+/.test(n)||(r.email="El correo es inv\xe1lido"),0===c.trim().length&&(r.numeroTelefonico="Escribe un nombre v\xe1lido"),r},Nt=function(e){var t=e.isEdit,a=Object(o.b)(),c=Object(n.useState)(!0),r=Object(l.a)(c,2),i=r[0],u=r[1],b=Object(n.useState)(""),f=Object(l.a)(b,2),O=f[0],p=f[1],x=Object(o.c)((function(e){return e.citas})).cita,v=Object(n.useRef)(x),g=function(e){e.preventDefault(),a(function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a,n){var c,r,s,i,o,l,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=localStorage.getItem("token"),t.next=3,V(c,e._id);case 3:return r=t.sent,t.next=6,r.json();case 6:s=t.sent,i=s.ok,o=s.msg,l=s.cita,(u=n().ui.diaActivo).citas=u.citas.map((function(e){return e._id===l._id?l:e})),i&&(a(Ze()),a(je(o)),a(Ye(l)),a(me(u)));case 13:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(x))},y=j(Object(d.a)({},x),yt,(function(){if(""!==O){var e="PENDIENTE"===x.estado?Object(d.a)(Object(d.a)({},x),{},{estado:"AGENDADA",fechaDeseada:new Date(O).toISOString()}):Object(d.a)(Object(d.a)({},x),{},{fechaDeseada:new Date(O).toISOString()});a(Xe(e))}else a(Xe(_))})),N=Object(l.a)(y,5),_=N[0],C=N[1],k=N[2],w=N[3],E=N[4],A=_.nombre,S=_.apellido,D=_.email,I=_.numeroTelefonico,P=Object(n.useRef)(x._id);return Object(n.useEffect)((function(){u(x.hasOwnProperty("idPaciente")),P.current!==x._id&&(v.current=x,E(Object(d.a)({},x)),P.current=x._id)}),[x,E]),Object(n.useEffect)((function(){a(Qe(_))}),[_,a]),Object(ge.jsxs)("div",{className:"edit-form__box-container create",children:[Object(ge.jsx)("div",{className:"edit-form__action-bar"}),Object(ge.jsxs)("form",{className:"edit-form__form-container",children:[Object(ge.jsx)("div",{className:"edit-form__form-container-title",children:Object(ge.jsx)("h2",{children:i?Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)("i",{className:"fas fa-user-clock"})," Editar horario:"]}):Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)("i",{className:"fas fa-edit"}),"Editar cita:"]})})}),i?Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsxs)("div",{style:{display:"flex",width:"70%",justifyContent:"space-between"},children:[Object(ge.jsxs)("h2",{children:[A," ",S]}),Object(ge.jsxs)(s.b,{to:"#",className:"link link-suc mb-5",children:["Paciente ",Object(ge.jsx)("i",{className:"fas fa-check"})," "]})]}),Object(ge.jsxs)("span",{style:{paddingLeft:"6px",textAlign:"left",width:"70%",marginBottom:"-10px",fontSize:"9.5px",fontWeight:"500"},children:[" \u2190 Puedes encontrar el horario actual de la cita de ",A," en la barra de la izquierda. "]}),Object(ge.jsx)(xt,{handleState:p})]}):Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(ot,{isEdit:t,name:"nombre",label:"Nombre",handleInputChange:C,value:A}),w.nombre&&Object(ge.jsx)(Ne,{message:w.nombre}),Object(ge.jsx)(ot,{isEdit:t,name:"apellido",label:"Apellido",handleInputChange:C,value:S}),w.apellido&&Object(ge.jsx)(Ne,{message:w.apellido}),Object(ge.jsx)(ot,{isEdit:t,name:"email",handleInputChange:C,value:D,label:"Email"}),w.email&&Object(ge.jsx)(Ne,{message:w.email}),Object(ge.jsx)(ot,{isEdit:t,name:"numeroTelefonico",handleInputChange:C,value:I,label:"N\xfamero telef\xf3nico"}),w.numeroTelefonico&&Object(ge.jsx)(Ne,{message:w.numeroTelefonico})]}),Object(ge.jsxs)("div",{style:{width:"70%"},className:"edit-form__action-bar-group",children:[Object(ge.jsx)(we,{onClick:i?function(e){return g(e)}:function(e){return function(e){e.preventDefault(),v!==x&&E(Object(d.a)({},v.current))}(e)},clickable:!0,warning:"true",text:i?"Cancelar cita":"Cancelar cambios",group:!0}),Object(ge.jsx)(we,{onClick:k,clickable:!0,text:"Guardar",group:!0})]}),!i&&Object(ge.jsx)("span",{onClick:function(e){return a(he()),a(Ve()),a(qe()),delete _.estado,delete _._id,a(Be(Object(d.a)({},_))),void a(de("PACIENTES"))},className:"link link-err mb-5",children:"Este cliente todav\xeda no es un paciente, click aqu\xed para agregarlo."})]})]})},_t=function(e){var t=e.handleClose,a=Object(o.c)((function(e){return e.ui})).diaActivo,n=a.date,c=a.citas,r=Object(o.b)();return Object(ge.jsxs)("aside",{className:"sidebar",children:[Object(ge.jsxs)("div",{onClick:t,className:"sidebar__navbar",children:[Object(ge.jsx)("h1",{children:Object(ge.jsx)("i",{className:"far fa-window-close"})}),Object(ge.jsx)("div",{className:"sidebar__title",children:Object(ge.jsxs)("p",{children:["Citas para el ",Object(ge.jsx)("span",{className:"sidebar__title-date",children:n})]})})]}),Object(ge.jsx)("div",{className:"sidebar__citas mt-5",children:null===c||void 0===c?void 0:c.map((function(e){return Object(ge.jsx)(Le,{estado:e.estado,date:e.fechaDeseada,onChange:function(){return function(e){r(Qe(e))}(e)},id:e._id,label:e.nombre},e._id)}))})]})},Ct=function(e){var t=e.dia,a=e.modalAbierto,c=e.handleClose,r=t.citas,s=Object(n.useState)(),i=Object(l.a)(s,2),u=i[0],d=i[1],j=Object(n.useState)(!1),b=Object(l.a)(j,2),h=b[0],m=b[1],f=Object(o.c)((function(e){return e.citas})),O=f.isCitaActive,p=f.cita,x=Object(o.c)((function(e){return e.ui})),v=x.mensajeToast,g=x.toastAbierto;return Object(n.useEffect)((function(){r&&0===r.length?d(!0):(d(!1),m(!1))}),[r]),Object(ge.jsxs)("div",{className:"modal-background ".concat(a?"modal-showing":""),children:[g&&Object(ge.jsx)(Se,{success:"Necesitas llenar los 2 valores"!==v.error,error:v.error}),Object(ge.jsxs)("div",{className:"modal-inner",children:[Object(ge.jsx)(_t,{handleClose:c}),Object(ge.jsx)("div",{className:"modal-form",children:u?Object(ge.jsx)(ge.Fragment,{children:h?Object(ge.jsx)(gt,{}):Object(ge.jsx)("div",{className:"modal-form__banner",children:Object(ge.jsxs)("div",{children:[Object(ge.jsx)("i",{onClick:function(){return m(!0)},className:"far fa-calendar-plus"}),Object(ge.jsx)("h1",{children:"Crea una cita para esta fecha."})]})})}):O?Object(ge.jsx)(Nt,{isEdit:!0,cita:p}):h?Object(ge.jsx)(gt,{}):Object(ge.jsxs)("div",{className:"modal-form__banner",children:[Object(ge.jsxs)("div",{children:[Object(ge.jsx)(Ie,{size:"big"}),Object(ge.jsx)("h1",{children:"Escoje una cita dentro de las opciones a la izquierda!"})]}),"O",Object(ge.jsxs)("div",{children:[Object(ge.jsx)("i",{onClick:function(){return m(!0)},className:"far fa-calendar-plus"}),Object(ge.jsx)("h1",{children:"Crea una cita para esta fecha."})]})]})})]})]})},kt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth})).rol;return Object(ge.jsx)("nav",{className:"nav",children:Object(ge.jsxs)("ul",{className:"nav__links",children:[Object(ge.jsx)("li",{children:Object(ge.jsxs)(s.c,{activeClassName:"nav__links-active",exact:!0,to:"/dentaltask",children:[Object(ge.jsx)("i",{className:"fas fa-home"}),Object(ge.jsx)("span",{className:"icon-text",children:" Home"})]})}),Object(ge.jsx)("li",{children:Object(ge.jsxs)(s.c,{activeClassName:"nav__links-active",to:"/dentaltask/calendario",children:[Object(ge.jsx)("i",{className:"fas fa-calendar-alt"}),Object(ge.jsx)("span",{className:"icon-text",children:" Calendario"})]})}),Object(ge.jsx)("li",{children:Object(ge.jsxs)(s.c,{activeClassName:"nav__links-active",to:"/dentaltask/pacientes",children:[Object(ge.jsx)("i",{className:"fas fa-user-injured"}),Object(ge.jsx)("span",{className:"icon-text",children:" Pacientes"})]})}),"ADMIN_ROLE"===t&&Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)("li",{children:Object(ge.jsxs)(s.c,{activeClassName:"nav__links-active",to:"/dentaltask/reportes",children:[Object(ge.jsx)("i",{className:"fas fa-file-contract"}),Object(ge.jsx)("span",{className:"icon-text",children:" Reportes"})]})}),Object(ge.jsx)("li",{children:Object(ge.jsxs)(s.c,{activeClassName:"nav__links-active",to:"/dentaltask/usuarios",children:[Object(ge.jsx)("i",{className:"fas fa-users"}),Object(ge.jsx)("span",{className:"icon-text",children:" Usuarios"})]})})]}),Object(ge.jsx)("li",{children:Object(ge.jsxs)(s.c,{activeClassName:"nav__links-active",to:"/dentaltask/configuracion",children:[Object(ge.jsx)("i",{className:"fas fa-cogs"}),Object(ge.jsx)("span",{className:"icon-text",children:" Configuraci\xf3n"})]})}),Object(ge.jsx)("button",{className:"btn btn__primary",onClick:function(t){t.preventDefault(),e({type:w}),e(qe()),e(function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("token"),localStorage.removeItem("token-init-date"),t(Oe());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Cerrar sesi\xf3n"})]})})},wt=function(e){var t=e.modalAbierto,a=e.handleClose,n=Object(o.c)((function(e){return e.ui})),c=n.mensajeToast,r=n.toastAbierto;return Object(ge.jsxs)("div",{className:"modal-background ".concat(t?"modal-showing":""),children:[r&&Object(ge.jsx)(Se,{success:!0,error:c.error}),Object(ge.jsx)("div",{className:"modal-inner d-flex",children:Object(ge.jsx)("div",{className:"modal-form",children:Object(ge.jsx)(ft,{handleClose:a})})})]})},Et=a(68),At=a(35),St=function(e){var t=e.reporte,a=e.desde,c=e.hasta,r=Object(n.useState)([]),s=Object(l.a)(r,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(h.a.mark((function e(){var n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),e.next=3,oe(t,{desde:a,hasta:c},n);case 3:return r=e.sent,e.next=6,r.json();case 6:s=e.sent,o(s.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,a,c]),console.log(i),Object(ge.jsx)("div",{style:{margin:"auto"},children:Object(ge.jsx)(At.Bar,{id:"report",data:{labels:i.map((function(e){return e.mes})),datasets:[{label:"".concat(t),data:"Cantidad de citas"===t?i.map((function(e){return e.citas})):i.map((function(e){return e.pacientes})),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},height:630,width:1200,options:{maintainAspectRatio:!0}})})},Dt=function(e){var t=e.reporte,a=e.mes,c=Object(n.useState)([]),r=Object(l.a)(c,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(h.a.mark((function e(){var n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),e.next=3,oe(t,{mes:a},n);case 3:return c=e.sent,e.next=6,c.json();case 6:r=e.sent,i(r.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,a]),console.log(s),Object(ge.jsx)("div",{style:{margin:"auto"},children:Object(ge.jsx)(At.Pie,{id:"report",data:{labels:s.map((function(e){return e.estado})),datasets:[{label:"".concat(t),data:s.map((function(e){return e.conteo})),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},height:600,width:1200,options:{maintainAspectRatio:!0}})})},It=function(e){var t=e.handleState,a=Object(n.useState)(!1),c=Object(l.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)("Seleccione un reporte"),o=Object(l.a)(i,2),u=o[0],d=o[1];return Object(ge.jsxs)("div",{style:{width:"85%"},className:"select__box",children:[Object(ge.jsxs)("div",{className:"select__box__placeholder ".concat(r&&"active"),children:[u,Object(ge.jsx)("i",{onClick:function(){return s(!r),void t("")},className:"fas fa-caret-square-down"})]}),Object(ge.jsx)("div",{className:"select__box-options ".concat(r&&"active"),children:["Cantidad de citas","Pacientes nuevos","Detalle de citas mensual"].map((function(e,a){return Object(ge.jsxs)("div",{onClick:function(){return function(e){s(!r),d(e),t(e)}(e)},className:"select__box-option",children:[Object(ge.jsx)("input",{type:"radio",className:"select__box-radio",id:e,name:e}),Object(ge.jsx)("label",{htmlFor:e,children:e})]},a)}))})]})},Pt=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(l.a)(r,2),i=s[0],o=s[1],u=Object(n.useState)(""),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(n.useState)(""),O=Object(l.a)(f,2),p=O[0],x=O[1],v=function(){var e=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("report").toBlob((function(e){return Object(Et.saveAs)(e,"testing.jpeg")}),"image/jpeg",1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){var t=e.target,a=t.value.split("-"),n=Object(l.a)(a,2),c=n[0],r=n[1],s=new Date(c,r-1);"desde"===t.name?o(s):s>i&&b(s),"mes"===t.name&&x(s)},y=Object(n.useRef)(a);return Object(n.useEffect)((function(){(null===y||void 0===y?void 0:y.current)!==a&&(y.current=a,o(""),b(""),x(""))}),[a]),Object(ge.jsxs)("div",{className:"main-container",children:[Object(ge.jsxs)("div",{className:"mt-5",style:{display:"flex",alignItems:"center"},children:[Object(ge.jsx)("div",{style:{marginLeft:"4rem",flex:"0 0 30%"},children:Object(ge.jsx)(It,{handleState:c})}),a&&"Detalle de citas mensual"!==a?Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsxs)("form",{style:{display:"flex",flex:"0 0 40%",justifyContent:"space-between",marginRight:"1rem"},children:[Object(ge.jsxs)("div",{style:{marginRight:"2rem"},children:[Object(ge.jsx)("label",{style:{fontWeight:"500"},htmlFor:"start",children:"Desde:"}),Object(ge.jsx)(ye,{name:"desde",handleInputChange:g,errors:{},type:"month",placeholder:"El mes"})]}),i&&Object(ge.jsxs)("div",{children:[Object(ge.jsx)("label",{style:{fontWeight:"500"},htmlFor:"start",children:"Hasta:"}),Object(ge.jsx)(ye,{name:"hasta",handleInputChange:g,errors:{},type:"month"})]})]}),i&&j&&Object(ge.jsx)("div",{style:{marginRight:"auto",marginLeft:"4rem",flex:"0 0 30%"},children:Object(ge.jsx)(we,{clickable:!0,onClick:function(){return v()},text:"Descargar reporte",group:!0})})]}):a&&Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)("form",{style:{display:"flex",flex:"0 0 40%",justifyContent:"center",marginRight:"1rem"},children:Object(ge.jsxs)("div",{style:{width:"70%"},children:[Object(ge.jsx)("label",{style:{fontWeight:"500"},htmlFor:"start",children:"Mes:"}),Object(ge.jsx)(ye,{name:"mes",handleInputChange:g,errors:{},type:"month",placeholder:"El mes"})]})}),p&&Object(ge.jsx)("div",{style:{marginRight:"auto",marginLeft:"4rem",flex:"0 0 30%"},children:Object(ge.jsx)(we,{clickable:!0,onClick:function(){return v()},text:"Descargar reporte",group:!0})})]})]}),(a&&j||a&&p)&&Object(ge.jsx)("div",{className:"".concat("Detalle de citas mensual"===a&&"mt-5"),style:{display:"flex"},children:"Cantidad de citas"===a||"Pacientes nuevos"===a?Object(ge.jsx)(St,{desde:i,hasta:j,reporte:a}):"Detalle de citas mensual"===a&&Object(ge.jsx)(Dt,{mes:p,reporte:a})})]})},Tt=function(e){var t=e.usuario,a=e.email,n=e.nombre,c=e.rol,r=e.estado,s=e.id,i=e.handleEdit,l=Object(o.b)(),u=function(){return l((e=s,function(){var t=Object(m.a)(h.a.mark((function t(a,n){var c,r,s,i,o,l,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=localStorage.getItem("token"),t.next=3,ue(c,e);case 3:return r=t.sent,t.next=6,r.json();case 6:s=t.sent,i=s.ok,o=s.msg,l=s.newUser,u=n().usuarios.totalUsers,i&&(u=u.map((function(e){return e._id===l._id?l:e})),a(ke(u)),a(je(o)));case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));var e};return Object(ge.jsxs)("div",{style:{transition:"all ease-in-out .3s"},className:"b-bottom grid__body-item ".concat(!r&&"linethrough"),children:[Object(ge.jsx)("span",{className:"col-1-of-5",children:t}),Object(ge.jsx)("span",{className:"col-1-of-5",children:n}),Object(ge.jsx)("span",{className:"col-1-of-5",children:a}),Object(ge.jsx)("span",{className:"col-1-of-5",children:function(e){return"USER_ROLE"===e?"Usuario":"Administrador"}(c)}),Object(ge.jsxs)("span",{style:{display:"flex",justifyContent:"space-around"},className:"col-1-of-5",children:[Object(ge.jsx)("i",{onClick:function(){return u()},className:"fas fa-user-slash delete"}),r&&Object(ge.jsx)("i",{className:"fas fa-edit edit",onClick:i})]})]})},Ut=function(e){var t=e.totalUsers,a=e.handleEdit;return Object(ge.jsxs)("div",{className:"grid",children:[Object(ge.jsxs)("div",{className:"grid__header",style:{width:"98%"},children:[Object(ge.jsx)("h5",{className:"col-1-of-5",children:"Usuario"}),Object(ge.jsx)("h5",{className:"col-1-of-5",children:"Nombre"}),Object(ge.jsx)("h5",{className:"col-1-of-5",children:"Correo electronico"}),Object(ge.jsx)("h5",{className:"col-1-of-5",children:"Rol"}),Object(ge.jsx)("h5",{className:"col-1-of-5",children:"Acciones"})]}),Object(ge.jsx)("div",{className:"grid__body",style:{width:"100%",height:"100%"},children:t.length>0&&t.map((function(e){var t=e._id,n=e.estado,c=e.nombre,r=e.apellido,s=e.email,i=e.user,o=e.rol;return Object(ge.jsx)(Tt,{handleEdit:a,rol:o,id:t,usuario:i,email:s,estado:n,nombre:"".concat(c," ").concat(r)},t)}))})]})},Lt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.ui})),a=t.mensajeToast,c=t.toastAbierto,r=t.modalAbierto,s=Object(n.useState)(!1),i=Object(l.a)(s,2),u=i[0],d=i[1],j=Object(o.c)((function(e){return e.usuarios})).totalUsers;return Object(n.useEffect)((function(){e(function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n,c,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,le(a);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,r=c.ok,s=c.users,r&&s.length>0?t(ke(s)):t(ke([]));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(ge.jsxs)(ge.Fragment,{children:[c&&!r&&Object(ge.jsx)(Se,{context:"screen",success:!0,error:a.error}),Object(ge.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-around"},children:[Object(ge.jsx)("div",{className:"main-container",style:{width:"25%",height:"77%"},children:Object(ge.jsx)("div",{style:{width:"90%",margin:"2.2rem auto"},children:Object(ge.jsx)(Ae,{isEdit:u})})}),Object(ge.jsx)("div",{className:"main-container",style:{width:"65%",minHeight:"100%",overflow:"auto"},children:Object(ge.jsx)(Ut,{handleEdit:function(){return d(!u)},totalUsers:j})})]})]})},Rt=function(){var e=Object(o.c)((function(e){return e.ui})),t=e.modalAbierto,a=e.diaActivo,n=e.tipoModal,c=Object(o.b)(),r=function(){c(he()),c({type:g}),c(Ve()),c(be())};return Object(ge.jsxs)("div",{className:"main",children:[Object(ge.jsx)(kt,{}),t&&0!==Object.keys(a).length&&"CALENDARIO"===n&&Object(ge.jsx)(Ct,{dia:a,handleClose:function(){return r()},modalAbierto:t}),t&&"PACIENTES"===n&&Object(ge.jsx)(wt,{handleClose:function(){return c(he()),c(Ke()),void c(be())},modalAbierto:t}),Object(ge.jsx)("div",{className:"main__main-content",children:Object(ge.jsxs)(i.d,{children:[Object(ge.jsx)(i.b,{exact:!0,path:"/dentaltask/",component:st}),Object(ge.jsx)(i.b,{exact:!0,path:"/dentaltask/calendario",component:at}),Object(ge.jsx)(i.b,{exact:!0,path:"/dentaltask/citas",component:nt}),Object(ge.jsx)(i.b,{exact:!0,path:"/dentaltask/pacientes",component:pt}),Object(ge.jsx)(i.b,{exact:!0,path:"/dentaltask/reportes",component:Pt}),"\\",Object(ge.jsx)(i.b,{exact:!0,path:"/dentaltask/usuarios",component:Lt}),Object(ge.jsx)(i.b,{exact:!0,path:"/dentaltask/configuracion",component:ct})]})})]})},zt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth})),a=t.checking,c=t.uid;return Object(n.useEffect)((function(){e(function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,W(a);case 3:return n=e.sent,e.next=6,n.json();case 6:(c=e.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(fe(c.uid,c.name,c.rol))):t(pe());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),a?Object(ge.jsx)("div",{style:{display:"flex",height:"100vh",alignItems:"center"},children:Object(ge.jsx)(Ie,{size:"big"})}):Object(ge.jsx)(s.a,{children:Object(ge.jsx)("div",{children:Object(ge.jsxs)(i.d,{children:[Object(ge.jsx)(i.b,{path:"/public/schedule/:_id",component:Re}),Object(ge.jsx)(Te,{isAuthenticated:!!c,path:"/dentaltask",component:Rt}),Object(ge.jsx)(Ue,{path:"/",isAuthenticated:!!c,component:De})]})})})},Ft=a(69),qt=a(19),Mt={checking:!0},Gt={modalAbierto:!1,tipoModal:"",diaActivo:{},toastAbierto:!1,mensajeToast:""},Jt={isCitaActive:!1,cita:{},totalCitas:[]},Ht={isPacienteActive:!1,pacienteActivo:{},totalPacientes:[],citasPorPaciente:[],archivosPorPaciente:[]},Wt={horarioActivo:0},Bt={totalUsers:[]},Kt="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||qt.d,Qt=Object(qt.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{checking:!1});case F:return Object(d.a)(Object(d.a)({},e),{},{checking:!1});case M:return{checking:!1};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(d.a)(Object(d.a)({},e),{},{modalAbierto:!0,tipoModal:t.payload});case O:return Object(d.a)(Object(d.a)({},e),{},{modalAbierto:!1});case p:return Object(d.a)(Object(d.a)({},e),{},{mensajeToast:t.payload,toastAbierto:!0});case x:return Object(d.a)(Object(d.a)({},e),{},{toastAbierto:!1,mensajeToast:""});case v:return Object(d.a)(Object(d.a)({},e),{},{diaActivo:t.payload});case g:return Object(d.a)(Object(d.a)({},e),{},{diaActivo:{}});default:return e}},citas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(d.a)(Object(d.a)({},e),{},{cita:t.payload,isCitaActive:!0});case N:return Object(d.a)(Object(d.a)({},e),{},{cita:{},isCitaActive:!1});case _:return Object(d.a)(Object(d.a)({},e),{},{cita:t.payload});case C:return Object(d.a)(Object(d.a)({},e),{},{totalCitas:t.payload.citas});case w:return{isCitaActive:!1,cita:{},totalCitas:[]};case A:return Object(d.a)(Object(d.a)({},e),{},{isCitaActive:!1,cita:{}});case k:return Object(d.a)(Object(d.a)({},e),{},{totalCitas:e.totalCitas.map((function(e){return e._id===t.payload._id?t.payload:e}))});case E:return Object(d.a)(Object(d.a)({},e),{},{totalCitas:[].concat(Object(Ce.a)(e.totalCitas),[t.payload])});default:return e}},pacientes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(d.a)(Object(d.a)({},e),{},{totalPacientes:t.payload.pacientes});case D:return Object(d.a)(Object(d.a)({},e),{},{totalPacientes:e.totalPacientes.map((function(e){return e._id===t.payload._id?t.payload:e}))});case I:return Object(d.a)(Object(d.a)({},e),{},{isPacienteActive:!0,pacienteActivo:t.payload});case P:return Object(d.a)(Object(d.a)({},e),{},{isPacienteActive:!1,pacienteActivo:null});case T:return Object(d.a)(Object(d.a)({},e),{},{citasPorPaciente:Object(Ce.a)(t.payload)});case U:return Object(d.a)(Object(d.a)({},e),{},{archivosPorPaciente:Object(Ce.a)(t.payload)});case L:return Object(d.a)(Object(d.a)({},e),Ht);default:return e}},horarios:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(d.a)(Object(d.a)({},e),{},{horarioActivo:t.payload.horario});default:return e}},usuarios:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(d.a)(Object(d.a)({},e),{},{totalUsers:t.payload.users});default:return e}}}),Vt=Object(qt.e)(Qt,Kt(Object(qt.a)(Ft.a))),Xt=function(){return Object(ge.jsx)(o.a,{store:Vt,children:Object(ge.jsx)(zt,{})})};a(176);r.a.render(Object(ge.jsx)(Xt,{}),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.183dc758.chunk.js.map