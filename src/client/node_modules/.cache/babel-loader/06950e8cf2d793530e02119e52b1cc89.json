{"ast":null,"code":"import _regeneratorRuntime from\"/home/marceliux/Development/BoilerLog/NodeTask/src/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/marceliux/Development/BoilerLog/NodeTask/src/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/marceliux/Development/BoilerLog/NodeTask/src/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import{saveAs}from'file-saver';import{Button}from'../ui/Button';import{Input}from'../ui/Input';import{BarChart}from'../ui/reports/BarChart';import{PieChart}from'../ui/reports/PieChart';import{SelectReport}from'../ui/reports/SelectReport';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var ReportsScreen=function ReportsScreen(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),reporte=_useState2[0],setReporte=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),desde=_useState4[0],setDesde=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),hasta=_useState6[0],setHasta=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),mes=_useState8[0],setMes=_useState8[1];var handleReportDownload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var canvasReport;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:canvasReport=document.getElementById(\"report\");canvasReport.toBlob(function(blob){return saveAs(blob,'testing.jpeg');},'image/jpeg',1);case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleReportDownload(){return _ref.apply(this,arguments);};}();var handleMonthInput=function handleMonthInput(_ref2){var target=_ref2.target;var _target$value$split=target.value.split('-'),_target$value$split2=_slicedToArray(_target$value$split,2),year=_target$value$split2[0],month=_target$value$split2[1];var dateToSet=new Date(year,month-1);target.name==='desde'?setDesde(dateToSet):dateToSet>desde&&setHasta(dateToSet);target.name==='mes'&&setMes(dateToSet);};var activeReporte=useRef(reporte);useEffect(function(){if((activeReporte===null||activeReporte===void 0?void 0:activeReporte.current)!==reporte){activeReporte.current=reporte;setDesde('');setHasta('');setMes('');}},[reporte]);return/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:'4rem',flex:'0 0 30%'},children:/*#__PURE__*/_jsx(SelectReport,{handleState:setReporte})}),reporte&&reporte!=='Detalle de citas mensual'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{style:{display:'flex',flex:'0 0 40%',justifyContent:'space-between',marginRight:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginRight:'2rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500'},htmlFor:\"start\",children:\"Desde:\"}),/*#__PURE__*/_jsx(Input,{name:\"desde\",handleInputChange:handleMonthInput,errors:{},type:\"month\",placeholder:\"El mes\"})]}),desde&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500'},htmlFor:\"start\",children:\"Hasta:\"}),/*#__PURE__*/_jsx(Input,{name:\"hasta\",handleInputChange:handleMonthInput,errors:{},type:\"month\"})]})]}),desde&&hasta&&/*#__PURE__*/_jsx(\"div\",{style:{marginRight:'auto',marginLeft:'4rem',flex:'0 0 30%'},children:/*#__PURE__*/_jsx(Button,{clickable:true,onClick:function onClick(){return handleReportDownload();},text:\"Descargar reporte\",group:true})})]}):reporte&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"form\",{style:{display:'flex',flex:'0 0 40%',justifyContent:'center',marginRight:'1rem'},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'70%'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500'},htmlFor:\"start\",children:\"Mes:\"}),/*#__PURE__*/_jsx(Input,{name:\"mes\",handleInputChange:handleMonthInput,errors:{},type:\"month\",placeholder:\"El mes\"})]})}),mes&&/*#__PURE__*/_jsx(\"div\",{style:{marginRight:'auto',marginLeft:'4rem',flex:'0 0 30%'},children:/*#__PURE__*/_jsx(Button,{clickable:true,onClick:function onClick(){return handleReportDownload();},text:\"Descargar reporte\",group:true})})]})]}),(reporte&&hasta||reporte&&mes)&&/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(reporte==='Detalle de citas mensual'&&'mt-5'),style:{display:'flex'},children:reporte==='Cantidad de citas'||reporte==='Pacientes nuevos'?/*#__PURE__*/_jsx(BarChart,{desde:desde,hasta:hasta,reporte:reporte}):reporte==='Detalle de citas mensual'&&/*#__PURE__*/_jsx(PieChart,{mes:mes,reporte:reporte})})]});};","map":{"version":3,"sources":["/home/marceliux/Development/BoilerLog/NodeTask/src/client/src/components/screens/ReportsScreen.jsx"],"names":["React","useEffect","useRef","useState","saveAs","Button","Input","BarChart","PieChart","SelectReport","ReportsScreen","reporte","setReporte","desde","setDesde","hasta","setHasta","mes","setMes","handleReportDownload","canvasReport","document","getElementById","toBlob","blob","handleMonthInput","target","value","split","year","month","dateToSet","Date","name","activeReporte","current","display","alignItems","marginLeft","flex","justifyContent","marginRight","fontWeight","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { saveAs } from 'file-saver'; \nimport { Button } from '../ui/Button'\nimport { Input } from '../ui/Input'\nimport { BarChart } from '../ui/reports/BarChart'\nimport { PieChart } from '../ui/reports/PieChart'\nimport { SelectReport } from '../ui/reports/SelectReport'\n\nexport const ReportsScreen = () => {\n\n    const [reporte, setReporte] = useState('')\n    const [desde, setDesde] = useState('')\n    const [hasta, setHasta] = useState('')\n    const [mes, setMes] = useState('')\n\n    const handleReportDownload = async () => {\n        let canvasReport = document.getElementById(\"report\")\n        canvasReport.toBlob((blob) => saveAs(blob, 'testing.jpeg'), 'image/jpeg', 1)\n    }\n \n\n    const handleMonthInput = ({target}) => {\n        const [year, month] = target.value.split('-')\n\n        const dateToSet = new Date(year,  month - 1)\n        target.name === 'desde' \n            ? setDesde(dateToSet) \n            : (dateToSet) > desde && setHasta(dateToSet)\n\n            target.name === 'mes' && setMes(dateToSet)\n    }\n\n    const activeReporte = useRef(reporte)\n\n    useEffect(()=> {\n        if(activeReporte?.current !== reporte){\n            activeReporte.current = reporte\n            setDesde('')\n            setHasta('')\n            setMes('')\n        }\n    }, [reporte])\n\n    return (\n        <div className=\"main-container\">\n            <div className=\"mt-5\" style={{display: 'flex', alignItems: 'center'}}>    \n                <div style={{marginLeft: '4rem', flex: '0 0 30%'}}>\n                    <SelectReport handleState={setReporte} />\n                </div>\n                {\n                    reporte && reporte !== 'Detalle de citas mensual' \n                        ?\n                            <>\n                                <form style={{display:'flex', flex: '0 0 40%', justifyContent:'space-between', marginRight: '1rem'}}>\n                                    <div style={{marginRight: '2rem'}}>\n                                        <label style={{fontWeight: '500'}} htmlFor=\"start\">Desde:</label>\n                                        <Input name=\"desde\" handleInputChange={handleMonthInput} errors={{}} type=\"month\" placeholder=\"El mes\" />\n                                    </div>\n                                    {\n                                        desde &&\n                                            <div>\n                                                <label style={{fontWeight: '500'}} htmlFor=\"start\">Hasta:</label>\n                                                <Input name=\"hasta\" handleInputChange={handleMonthInput} errors={{}} type=\"month\" />\n                                            </div>\n                                    }\n                                </form>\n                                {\n                                    desde && hasta &&\n                                        <div style={{marginRight: 'auto', marginLeft: '4rem', flex: '0 0 30%'}}>\n                                            <Button clickable={true} onClick={() => handleReportDownload()} text=\"Descargar reporte\" group={true}/>\n                                        </div>\n                                }\n\n                            </>\n                        : reporte && \n                            <>\n                                <form style={{display:'flex', flex: '0 0 40%', justifyContent:'center', marginRight: '1rem'}}>\n                                    <div style={{width: '70%'}}>\n                                        <label style={{fontWeight: '500'}} htmlFor=\"start\">Mes:</label>\n                                        <Input name=\"mes\" handleInputChange={handleMonthInput} errors={{}} type=\"month\" placeholder=\"El mes\" />\n                                    </div>\n                                </form>\n                                {\n                                    mes &&\n                                        <div style={{marginRight: 'auto', marginLeft: '4rem', flex: '0 0 30%'}}>\n                                            <Button clickable={true} onClick={() => handleReportDownload()} text=\"Descargar reporte\" group={true}/>\n                                        </div>\n                                }\n\n                            </>\n                }\n\n            </div>\n            {\n                ((reporte && hasta) || (reporte && mes)) &&\n                    <div className={`${reporte === 'Detalle de citas mensual' && 'mt-5'}`} style={{display: 'flex' }}>\n                        {\n                            reporte === 'Cantidad de citas' || reporte === 'Pacientes nuevos'\n                                ? <BarChart desde={desde} hasta={hasta} reporte={reporte}/>\n                                : reporte === 'Detalle de citas mensual' \n                                    &&\n                                        <PieChart mes={mes} reporte={reporte} />\n                                    \n\n                        }\n                    </div>\n            }\n\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}