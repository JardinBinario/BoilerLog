{"ast":null,"code":"var _jsxFileName = \"/home/marceliux/Development/BoilerLog/NodeTask/src/client/src/components/ui/calendar/EditCita.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { removeCitaActiva, setCitaActiva, startCancelingCita, startUpdateCita } from '../../../actions/citas';\nimport { clearPacientes, setPacienteActivo } from '../../../actions/pacientes';\nimport { setModalActivo, setModalInactivo } from '../../../actions/ui';\nimport { areCitaInputsValid } from '../../controllers/citas.controller';\nimport { useForm } from '../../hooks/useForm';\nimport { Button } from '../Button';\nimport { ErrorHelp } from '../ErrorHelp';\nimport { InputGroup } from '../InputGroup';\nimport { SelectHorario } from './SelectHorario';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const EditCita = ({\n  isEdit\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n\n  const handleAddPacienteClick = () => {\n    dispatch(setModalInactivo());\n    dispatch(removeCitaActiva());\n    dispatch(clearPacientes());\n    delete values.estado;\n    delete values._id;\n    dispatch(setPacienteActivo({ ...values\n    }));\n    dispatch(setModalActivo('PACIENTES'));\n  };\n\n  const [isPaciente, setIsPaciente] = useState(true);\n  const [horario, setHorario] = useState('');\n\n  const handleUpdate = () => {\n    if (horario !== '') {\n      const update = cita.estado === \"PENDIENTE\" ? { ...cita,\n        estado: \"AGENDADA\",\n        fechaDeseada: new Date(horario).toISOString()\n      } : { ...cita,\n        fechaDeseada: new Date(horario).toISOString()\n      };\n      dispatch(startUpdateCita(update));\n    } else {\n      dispatch(startUpdateCita(values));\n    }\n  };\n\n  const {\n    cita\n  } = useSelector(state => state.citas);\n  const citaAntesDeCambios = useRef(cita);\n\n  const handleReset = e => {\n    e.preventDefault();\n    if (citaAntesDeCambios !== cita) reset({ ...citaAntesDeCambios.current\n    });\n  };\n\n  const handleDelete = e => {\n    e.preventDefault();\n    dispatch(startCancelingCita(cita));\n  };\n\n  const [values, handleInputChange, handleSubmit, errors, reset] = useForm({ ...cita\n  }, areCitaInputsValid, handleUpdate);\n  let {\n    nombre,\n    apellido,\n    email,\n    numeroTelefonico\n  } = values;\n  const activeCita = useRef(cita._id);\n  useEffect(() => {\n    setIsPaciente(cita.hasOwnProperty('idPaciente'));\n\n    if (activeCita.current !== cita._id) {\n      citaAntesDeCambios.current = cita;\n      reset({ ...cita\n      });\n      activeCita.current = cita._id;\n    }\n  }, [cita, reset]);\n  useEffect(() => {\n    dispatch(setCitaActiva(values));\n  }, [values, dispatch]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"edit-form__box-container create\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"edit-form__action-bar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"edit-form__form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit-form__form-container-title\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: isPaciente ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-user-clock\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 33\n            }, this), \" Editar horario:\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 33\n            }, this), \"Editar cita:\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), isPaciente ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            width: '70%',\n            justifyContent: 'space-between'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [nombre, \" \", apellido]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"#\",\n            className: \"link link-suc mb-5\",\n            children: [\"Paciente \", /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-check\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 82\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            paddingLeft: '6px',\n            textAlign: 'left',\n            width: '70%',\n            marginBottom: '-10px',\n            fontSize: '9.5px',\n            fontWeight: '500'\n          },\n          children: [\" \\u2190 Puedes encontrar el horario actual de la cita de \", nombre, \" en la barra de la izquierda. \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(SelectHorario, {\n          handleState: setHorario\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(InputGroup, {\n          isEdit: isEdit,\n          name: \"nombre\",\n          label: \"Nombre\",\n          handleInputChange: handleInputChange,\n          value: nombre\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }, this), errors.nombre && /*#__PURE__*/_jsxDEV(ErrorHelp, {\n          message: errors.nombre\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 51\n        }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n          isEdit: isEdit,\n          name: \"apellido\",\n          label: \"Apellido\",\n          handleInputChange: handleInputChange,\n          value: apellido\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this), errors.apellido && /*#__PURE__*/_jsxDEV(ErrorHelp, {\n          message: errors.apellido\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 53\n        }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n          isEdit: isEdit,\n          name: \"email\",\n          handleInputChange: handleInputChange,\n          value: email,\n          label: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 25\n        }, this), errors.email && /*#__PURE__*/_jsxDEV(ErrorHelp, {\n          message: errors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 50\n        }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n          isEdit: isEdit,\n          name: \"numeroTelefonico\",\n          handleInputChange: handleInputChange,\n          value: numeroTelefonico,\n          label: \"N\\xFAmero telef\\xF3nico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 25\n        }, this), errors.numeroTelefonico && /*#__PURE__*/_jsxDEV(ErrorHelp, {\n          message: errors.numeroTelefonico\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 61\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '70%'\n        },\n        className: \"edit-form__action-bar-group\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: isPaciente ? e => handleDelete(e) : e => handleReset(e),\n          clickable: true,\n          warning: \"true\",\n          text: isPaciente ? 'Cancelar cita' : 'Cancelar cambios',\n          group: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleSubmit,\n          clickable: true,\n          text: \"Guardar\",\n          group: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this), !isPaciente && /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: e => handleAddPacienteClick(e),\n        className: \"link link-err mb-5\",\n        children: \"Este cliente todav\\xEDa no es un paciente, click aqu\\xED para agregarlo.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditCita, \"7HqL1vbcMCFbaiHpCx7+2XJFRq4=\", false, function () {\n  return [useDispatch, useSelector, useForm];\n});\n\n_c = EditCita;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditCita\");","map":{"version":3,"sources":["/home/marceliux/Development/BoilerLog/NodeTask/src/client/src/components/ui/calendar/EditCita.jsx"],"names":["React","useEffect","useRef","useState","useDispatch","useSelector","Link","removeCitaActiva","setCitaActiva","startCancelingCita","startUpdateCita","clearPacientes","setPacienteActivo","setModalActivo","setModalInactivo","areCitaInputsValid","useForm","Button","ErrorHelp","InputGroup","SelectHorario","EditCita","isEdit","dispatch","handleAddPacienteClick","values","estado","_id","isPaciente","setIsPaciente","horario","setHorario","handleUpdate","update","cita","fechaDeseada","Date","toISOString","state","citas","citaAntesDeCambios","handleReset","e","preventDefault","reset","current","handleDelete","handleInputChange","handleSubmit","errors","nombre","apellido","email","numeroTelefonico","activeCita","hasOwnProperty","display","width","justifyContent","paddingLeft","textAlign","marginBottom","fontSize","fontWeight"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { removeCitaActiva, setCitaActiva, startCancelingCita, startUpdateCita } from '../../../actions/citas'\nimport { clearPacientes, setPacienteActivo } from '../../../actions/pacientes'\nimport { setModalActivo, setModalInactivo } from '../../../actions/ui'\nimport { areCitaInputsValid } from '../../controllers/citas.controller'\nimport { useForm } from '../../hooks/useForm'\nimport { Button } from '../Button'\nimport { ErrorHelp } from '../ErrorHelp'\nimport { InputGroup } from '../InputGroup'\nimport { SelectHorario } from './SelectHorario'\n\nexport const EditCita = ({isEdit}) => {\n\n    const dispatch = useDispatch()\n\n\n    const handleAddPacienteClick = () => {\n        dispatch(setModalInactivo())\n        dispatch(removeCitaActiva())\n        dispatch(clearPacientes())\n        delete values.estado \n        delete values._id \n        dispatch(setPacienteActivo({...values}))\n        dispatch(setModalActivo('PACIENTES'))\n         \n    }\n    const [isPaciente, setIsPaciente] = useState(true)\n\n    const [horario, setHorario] = useState('')\n    \n    const handleUpdate = () => {\n        if (horario !== '') {\n            const update = cita.estado === \"PENDIENTE\" \n                ? \n                    {...cita, estado: \"AGENDADA\", fechaDeseada: new Date(horario).toISOString()}\n                :\n                    {...cita, fechaDeseada: new Date(horario).toISOString()}\n            dispatch(startUpdateCita(update))\n        }else{\n            dispatch(startUpdateCita(values))\n        }\n    } \n\n    const {cita} = useSelector(state => state.citas)\n    const citaAntesDeCambios = useRef(cita)\n\n    const handleReset = (e) => {\n        e.preventDefault()\n        if(citaAntesDeCambios !== cita)\n            reset({...citaAntesDeCambios.current})\n    }\n\n    const handleDelete = (e) => {\n        e.preventDefault()\n        dispatch(startCancelingCita(cita))\n    }\n    \n    const [values, handleInputChange, handleSubmit, errors, reset] = useForm(\n        {...cita}, \n        areCitaInputsValid, handleUpdate)\n        \n    let {nombre, apellido, email, numeroTelefonico } = values\n    \n    const activeCita = useRef(cita._id)\n\n    useEffect(()=> {\n        setIsPaciente(cita.hasOwnProperty('idPaciente'))\n        if(activeCita.current !== cita._id){\n            citaAntesDeCambios.current = cita\n            reset({...cita})\n            activeCita.current = cita._id\n        }\n\n    }, [cita, reset])\n\n    useEffect(()=>{\n        dispatch(setCitaActiva(values))\n    }, [values, dispatch])\n    \n    return (\n        <div className=\"edit-form__box-container create\">\n            <div className=\"edit-form__action-bar\">\n                {/* <div className=\"edit-form__action-bar-group\">\n                    <div className=\"edit-form__action-bar-item\">\n                        <i className=\"fab fa-whatsapp\"></i>\n                    </div>\n                    <div className=\"edit-form__action-bar-item\">\n                        <i className=\"far fa-envelope\"></i>\n                    </div>\n                    <div className=\"edit-form__action-bar-item\">\n                        <i className=\"fas fa-phone-alt\"></i>\n                    </div>\n                </div> */}\n            </div>\n            <form className=\"edit-form__form-container\">\n                <div className=\"edit-form__form-container-title\">\n                    <h2>\n                        {isPaciente \n                            ? <><i className=\"fas fa-user-clock\"></i> Editar horario:</>  \n                            : <><i className=\"fas fa-edit\"></i>Editar cita:</>\n                        }\n                    </h2>\n                </div>\n                {isPaciente \n                    ? <> \n                        <div style={{display: 'flex', width: '70%', justifyContent:'space-between'}}>\n                            <h2>{nombre} {apellido}</h2>\n                            <Link to=\"#\" className=\"link link-suc mb-5\">Paciente <i className=\"fas fa-check\"></i> </Link>\n                        </div>\n                        <span style={{paddingLeft:'6px', textAlign: 'left', width: '70%', marginBottom: '-10px', fontSize: '9.5px', fontWeight: '500'}}> &#8592; Puedes encontrar el horario actual de la cita de {nombre} en la barra de la izquierda. </span>\n                        <SelectHorario handleState={setHorario}/>\n\n\n                      </> \n                    : <> \n                        <InputGroup \n                            isEdit={isEdit}\n                            name=\"nombre\"\n                            label=\"Nombre\"\n                            handleInputChange={handleInputChange} \n                            value={nombre} />\n                            {\n                                errors.nombre && (<ErrorHelp message={errors.nombre} />)\n                            }\n                \n                        <InputGroup \n                            isEdit={isEdit}\n                            name=\"apellido\" \n                            label=\"Apellido\"\n                            handleInputChange={handleInputChange} \n                            value={apellido}/>\n                            {\n                                errors.apellido && (<ErrorHelp message={errors.apellido} />)\n                            }\n\n                        <InputGroup\n                            isEdit={isEdit}\n                            name=\"email\" \n                            handleInputChange={handleInputChange} \n                            value={email} \n                            label=\"Email\"/>\n                            {\n                                errors.email && (<ErrorHelp message={errors.email} />)\n                            }\n                        <InputGroup \n                            isEdit={isEdit}\n                            name=\"numeroTelefonico\"\n                            handleInputChange={handleInputChange} \n                            value={numeroTelefonico} \n                            label=\"Número telefónico\"/>\n                            {\n                                errors.numeroTelefonico && (<ErrorHelp message={errors.numeroTelefonico} />)\n                            }\n                      </>                      \n                }    \n                <div style={{width: '70%'}} className=\"edit-form__action-bar-group\">\n                    <Button onClick={ isPaciente ? e => handleDelete(e) : e => handleReset(e) } clickable={true} warning=\"true\" text={isPaciente ? 'Cancelar cita' : 'Cancelar cambios'} group={true}/>\n                    <Button onClick={ handleSubmit } clickable={true} text=\"Guardar\" group={true}/>\n                </div>\n                {\n                    !isPaciente \n                    && <span onClick={e => handleAddPacienteClick(e)} className=\"link link-err mb-5\">\n                        Este cliente todavía no es un paciente, click aquí para agregarlo.\n                      </span>\n                }\n            </form>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}