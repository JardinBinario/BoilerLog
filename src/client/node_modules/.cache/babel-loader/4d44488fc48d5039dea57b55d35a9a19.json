{"ast":null,"code":"import _toConsumableArray from\"/home/marceliux/Development/BoilerLog/NodeTask/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/marceliux/Development/BoilerLog/NodeTask/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/marceliux/Development/BoilerLog/NodeTask/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{fetchGetUsers,fetchPutUser,fetchRegister}from'../services/fetch';import{types}from'../types/types';import{setToastActivo}from'./ui';export var startLoadingUsers=function startLoadingUsers(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var token,response,_yield$response$json,ok,users;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem('token');_context.next=3;return fetchGetUsers(token);case 3:response=_context.sent;_context.next=6;return response.json();case 6:_yield$response$json=_context.sent;ok=_yield$response$json.ok;users=_yield$response$json.users;ok&&users.length>0?dispatch(setUsers(users)):dispatch(setUsers([]));case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};var setUsers=function setUsers(users){return{type:types.usersSetUsers,payload:{users:_toConsumableArray(users)}};};export var startRegularRegister=function startRegularRegister(_ref2,admin){var email=_ref2.email,pwd=_ref2.pwd,name=_ref2.name,lastName=_ref2.lastName,user=_ref2.user;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var resp,_yield$resp$json,ok,newUser,errors,msg,totalUsers;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetchRegister(email,pwd,name,lastName,user,admin);case 2:resp=_context2.sent;_context2.next=5;return resp.json();case 5:_yield$resp$json=_context2.sent;ok=_yield$resp$json.ok;newUser=_yield$resp$json.newUser;errors=_yield$resp$json.errors;msg=_yield$resp$json.msg;totalUsers=getState().usuarios.totalUsers;if(ok){dispatch(setUsers([].concat(_toConsumableArray(totalUsers),[newUser])));dispatch(setToastActivo(msg));}else{errors?dispatch(setToastActivo(errors[Object.keys(errors)[0]].msg)):dispatch(setToastActivo(msg));}case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref3.apply(this,arguments);};}();};export var startDisablingUser=function startDisablingUser(_id){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var token,response,_yield$response$json2,ok,msg,newUser,totalUsers;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:token=localStorage.getItem('token');_context3.next=3;return fetchPutUser(token,_id);case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:_yield$response$json2=_context3.sent;ok=_yield$response$json2.ok;msg=_yield$response$json2.msg;newUser=_yield$response$json2.newUser;totalUsers=getState().usuarios.totalUsers;if(ok){totalUsers=totalUsers.map(function(user){return user._id===newUser._id?newUser:user;});dispatch(setUsers(totalUsers));dispatch(setToastActivo(msg));}case 12:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4,_x5){return _ref4.apply(this,arguments);};}();};export var startUpdatingUser=function startUpdatingUser(_id,update){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var token,response,_yield$response$json3,ok,msg,newUser,totalUsers;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:token=localStorage.getItem('token');_context4.next=3;return fetchPutUser(token,_id,update);case 3:response=_context4.sent;_context4.next=6;return response.json();case 6:_yield$response$json3=_context4.sent;ok=_yield$response$json3.ok;msg=_yield$response$json3.msg;newUser=_yield$response$json3.newUser;totalUsers=getState().usuarios.totalUsers;if(ok){totalUsers=totalUsers.map(function(user){return user._id===newUser._id?newUser:user;});dispatch(setUsers(totalUsers));dispatch(setToastActivo(msg));}case 12:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x6,_x7){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/marceliux/Development/BoilerLog/NodeTask/client/src/actions/users.js"],"names":["fetchGetUsers","fetchPutUser","fetchRegister","types","setToastActivo","startLoadingUsers","dispatch","token","localStorage","getItem","response","json","ok","users","length","setUsers","type","usersSetUsers","payload","startRegularRegister","admin","email","pwd","name","lastName","user","getState","resp","newUser","errors","msg","totalUsers","usuarios","Object","keys","startDisablingUser","_id","map","startUpdatingUser","update"],"mappings":"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","sourcesContent":["import { fetchGetUsers, fetchPutUser, fetchRegister } from '../services/fetch'\nimport {types} from '../types/types'\nimport { setToastActivo } from './ui'\n\n\nexport const startLoadingUsers = () =>{\n    return async dispatch => {\n        const token = localStorage.getItem('token')\n\n        const response = await fetchGetUsers(token)\n        const {ok, users} = await response.json()\n\n        ok && users.length > 0 ? dispatch(setUsers(users)) : dispatch(setUsers([]))\n    }\n}\n\nconst setUsers = (users) => ({\n    type: types.usersSetUsers,\n    payload:{\n        users: [...users]\n    }\n})\n\nexport const startRegularRegister = ({email, pwd, name, lastName, user}, admin) => {\n    return async (dispatch, getState) => {\n        const resp = await fetchRegister(email, pwd, name, lastName, user, admin)\n        const {ok, newUser, errors, msg} = await resp.json()\n        \n        const {totalUsers} = getState().usuarios\n\n        if(ok){\n            dispatch(setUsers([...totalUsers, newUser]))\n            dispatch(setToastActivo(msg))\n        }else{\n            errors \n                ? dispatch(setToastActivo(errors[Object.keys(errors)[0]].msg))\n                : dispatch(setToastActivo(msg))\n        }\n    }\n}\n\nexport const startDisablingUser = (_id) =>{\n    return async (dispatch, getState) => {\n        const token = localStorage.getItem('token')\n\n        const response = await fetchPutUser(token, _id)\n        const {ok, msg, newUser} = await response.json()\n\n        let {totalUsers} = getState().usuarios\n\n        if(ok){\n            totalUsers = totalUsers.map(user => user._id === newUser._id ? newUser : user)\n            dispatch(setUsers(totalUsers))            \n            dispatch(setToastActivo(msg))\n        }\n    }\n}\n\nexport const startUpdatingUser = (_id, update) =>{\n    return async (dispatch, getState) => {\n        const token = localStorage.getItem('token')\n        const response = await fetchPutUser(token, _id, update)\n        const {ok, msg, newUser} = await response.json()\n\n        let {totalUsers} = getState().usuarios\n\n        if(ok){\n            totalUsers = totalUsers.map(user => user._id === newUser._id ? newUser : user)\n            dispatch(setUsers(totalUsers))            \n            dispatch(setToastActivo(msg))\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}